{"version":3,"sources":["webpack:///./src/views/node-config/custom/components/ModulesConfig.vue?96e4","webpack:///./node_modules/core-js/modules/es.string.ends-with.js","webpack:///./src/views/node-config/custom/components/ModulesConfig.vue?dd34","webpack:///src/views/node-config/custom/components/ModulesConfig.vue","webpack:///./src/views/node-config/custom/components/ModulesConfig.vue?630c","webpack:///./src/views/node-config/custom/components/ModulesConfig.vue"],"names":["$","getOwnPropertyDescriptor","f","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","nativeEndsWith","endsWith","min","Math","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","target","proto","forced","searchString","that","this","endPosition","arguments","length","undefined","len","end","search","call","slice","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","formRules","form","on","handleChangeCheckCustom","model","value","callback","$$v","checkCustomTransaction","expression","_v","_s","$t","minRows","maxRows","$set","trim","loading","disabled","handleSubmit","handleCancel","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-332f0768.17ce52ee.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModulesConfig.vue?vue&type=style&index=0&id=0d364e7a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModulesConfig.vue?vue&type=style&index=0&id=0d364e7a&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeEndsWith = ''.endsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = String(searchString);\n    return nativeEndsWith\n      ? nativeEndsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-view import-plugin\"},[_c('div',{staticClass:\"box-card\"},[_c('el-form',{ref:\"form-box\",attrs:{\"rules\":_vm.formRules,\"model\":_vm.form,\"label-position\":\"top\"}},[_c('div',{staticClass:\"more-setting\"},[_c('el-checkbox',{on:{\"change\":_vm.handleChangeCheckCustom},model:{value:(_vm.checkCustomTransaction),callback:function ($$v) {_vm.checkCustomTransaction=$$v},expression:\"checkCustomTransaction\"}},[_vm._v(_vm._s(_vm.$t('nodeConfig.customTransactionModule')))])],1),_c('el-form-item',{ref:\"custom-transaction\",staticClass:\"custom-transaction margin-bottom-0\",attrs:{\"prop\":\"customTransaction\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4, maxRows: 6 },\"maxlength\":300,\"disabled\":!_vm.checkCustomTransaction,\"placeholder\":_vm.$t(_vm.checkCustomTransaction ? 'nodeConfig.valid.inputCustomTransaction': 'nodeConfig.valid.checkCustomTransaction')},model:{value:(_vm.form.customTransaction),callback:function ($$v) {_vm.$set(_vm.form, \"customTransaction\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.customTransaction\"}})],1)],1)],1),_c('div',{staticClass:\"box-footer\"},[_c('el-button',{staticClass:\"im-button large\",attrs:{\"loading\":_vm.loading,\"disabled\":_vm.disabled,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(_vm.$t('base.complete')))]),_c('el-button',{staticClass:\"im-button large\",on:{\"click\":_vm.handleCancel}},[_vm._v(_vm._s(_vm.$t('base.prevStep')))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"box-view import-plugin\">\n    <div class=\"box-card\">\n      <el-form ref=\"form-box\" :rules=\"formRules\" :model=\"form\" label-position=\"top\">\n        <div class=\"more-setting\">\n          <el-checkbox v-model=\"checkCustomTransaction\" @change=\"handleChangeCheckCustom\">{{ $t('nodeConfig.customTransactionModule') }}</el-checkbox>\n        </div>\n        <el-form-item\n          ref=\"custom-transaction\"\n          class=\"custom-transaction margin-bottom-0\"\n          prop=\"customTransaction\">\n          <el-input\n            v-model.trim=\"form.customTransaction\"\n            type=\"textarea\"\n            :autosize=\"{ minRows: 4, maxRows: 6 }\"\n            :maxlength=\"300\"\n            :disabled=\"!checkCustomTransaction\"\n            :placeholder=\"$t(checkCustomTransaction ? 'nodeConfig.valid.inputCustomTransaction': 'nodeConfig.valid.checkCustomTransaction')\">\n          </el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <div class=\"box-footer\">\n      <el-button class=\"im-button large\" :loading=\"loading\" :disabled=\"disabled\" type=\"primary\" @click=\"handleSubmit\">{{ $t('base.complete') }}</el-button>\n      <el-button class=\"im-button large\" @click=\"handleCancel\">{{ $t('base.prevStep') }}</el-button>\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    name: 'import-plugin',\n    data() {\n      return {\n        form: {\n          id: '',\n          customTransaction: '',\n        },\n        checkCustomTransaction: false,\n        loading: false,\n        disabled: true,\n      }\n    },\n    computed: {\n      opNodeId () {\n        let id = this.$route.query.id\n        return /\\d+/.test(id) ? Number(id) : undefined\n      },\n      formRules() {\n        const pathEndJAR = (rule, value, callback) => {\n          if (this.checkCustomTransaction && !this.form.customTransaction.endsWith('.jar')) {\n            callback(new Error(this.$t('nodeConfig.valid.pathEndJAR')))\n          } else {\n            callback()\n          }\n        }\n        return {\n          customTransaction: [\n            { required: this.checkCustomTransaction, message: this.$t('base.pleaseInput'), trigger: 'blur', },\n            { validator: pathEndJAR, trigger: 'blur', },\n          ]\n        }\n      },\n    },\n    created () {\n      this.getConfig()\n    },\n    methods: {\n      getConfig () {\n        if (!this.validNode()) return\n\n        this.disabled = true\n        this.$_api.getStarted.getPluginConfig({ id: this.opNodeId }, (err, res = {}) => {\n          if (err) return\n          this.disabled = false\n\n          this.initForm(res)\n        })\n      },\n\n      initForm(data) {\n        this.form = {\n          id: this.opNodeId,\n          customTransaction: data.customTransaction,\n        }\n        this.checkCustomTransaction = !!this.form.customTransaction\n      },\n\n      handleChangeCheckCustom (val) {\n        if (val) {\n          setTimeout(this.$refs['custom-transaction'].clearValidate, 0)\n        }\n      },\n\n      handleSubmit() {\n        this.$refs['form-box'].validate(valid => {\n          if (valid) {\n            let params = {\n              id: this.opNodeId,\n              customTransaction: this.checkCustomTransaction ? this.form.customTransaction : '',\n              configStatus: 1,\n            }\n\n            this.loading = true\n            this.$_api.getStarted.setPluginConfig(params, (err, res) => {\n              this.loading = false\n              if (err) return\n\n              this.$notify.success({\n                title: this.$t('base.successful'),\n                message: this.$t('base.success.operate')\n              })\n\n              this.$router.push('/get-started/dashboard')\n            })\n          }\n        })\n      },\n      validNode () {\n        // edit node\n        if (!/\\d+/.test(this.opNodeId)) {\n          this.$notify.warning({\n            title: this.$t('base.warning'),\n            message: this.$t('nodeConfig.opUnValidNode'),\n          })\n          return false\n        }\n        return true\n      },\n\n      handleCancel() {\n        this.$emit('prev-step')\n      },\n    },\n  }\n</script>\n<style lang=\"scss\" scoped>\n  .import-plugin {\n    /deep/ .el-form-item {\n      .el-form-item__label {\n        padding: 0;\n        font-size: 16px;\n        color: font-color();\n      }\n    }\n\n    /deep/ .more-setting {\n      margin: 10px 0;\n\n      .el-checkbox__label {\n        font-size: 14px;\n        color: font-color();\n      }\n    }\n\n    .custom-transaction {\n      width: 50%;\n    }\n\n  }\n\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModulesConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModulesConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModulesConfig.vue?vue&type=template&id=0d364e7a&scoped=true&\"\nimport script from \"./ModulesConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./ModulesConfig.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModulesConfig.vue?vue&type=style&index=0&id=0d364e7a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d364e7a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}