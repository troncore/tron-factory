(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c7867f2","chunk-b09eb714"],{"03e0":function(t,e,n){"use strict";var i=n("ef49"),o=n.n(i);o.a},"18b3":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-view database-config"},[n("div",{staticClass:"box-body"},[n("el-form",{ref:"database-config-form",attrs:{model:t.form,rules:t.formRules,"label-position":"left","label-width":"200px"}},[n("el-form-item",{attrs:{label:t.$t("configuration.selectDatabaseConfig"),prop:"storage_db_engine"}},[n("el-radio-group",{model:{value:t.form.dbEnine,callback:function(e){t.$set(t.form,"dbEnine",e)},expression:"form.dbEnine"}},[n("el-radio",{attrs:{label:"LEVELDB"}},[t._v("LevelDB")]),n("el-radio",{attrs:{label:"ROCKSDB"}},[t._v("RocksDB")])],1)],1),n("el-form-item",{attrs:{label:t.$t("configuration.isWriteSync"),prop:"storage_db_sync"}},[n("el-switch",{model:{value:t.form.isDBSync,callback:function(e){t.$set(t.form,"isDBSync",e)},expression:"form.isDBSync"}})],1),n("el-form-item",{attrs:{label:t.$t("configuration.isOpenTransaction"),prop:"storage_transHistory_switch"}},[n("el-switch",{attrs:{"active-value":"on","inactive-value":"off"},model:{value:t.form.isOpenTransaction,callback:function(e){t.$set(t.form,"isOpenTransaction",e)},expression:"form.isOpenTransaction"}})],1),n("el-form-item",{attrs:{label:t.$t("configuration.isNeedToUpdateAsset"),prop:"storage_needToUpdateAsset"}},[n("el-switch",{model:{value:t.form.needToUpdateAsset,callback:function(e){t.$set(t.form,"needToUpdateAsset",e)},expression:"form.needToUpdateAsset"}})],1),n("div",{staticClass:"more-setting"},[n("el-checkbox",{on:{change:t.handleChangeCheckCustom},model:{value:t.checkDBCustom,callback:function(e){t.checkDBCustom=e},expression:"checkDBCustom"}},[n("span",{staticClass:"check-label"},[t._v(t._s(t.$t("configuration.dbCustomModule")))])])],1),n("el-form-item",{ref:"db-custom",staticClass:"db-custom",attrs:{prop:"dbCustom"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},maxlength:300,disabled:!t.checkDBCustom,placeholder:t.$t(t.checkDBCustom?"configuration.valid.inputDBCustom":"configuration.valid.checkDBCustom")},model:{value:t.form.dbCustom,callback:function(e){t.$set(t.form,"dbCustom","string"===typeof e?e.trim():e)},expression:"form.dbCustom"}})],1)],1)],1),n("div",{staticClass:"box-footer align-right"},[n("el-button",{staticClass:"im-button large",on:{click:t.handleCancel}},[t._v(t._s(t.$t("base.prevStep")))]),n("el-button",{staticClass:"im-button large",attrs:{loading:t.loading,disabled:t.configLoading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("base.nextStep")))])],1)])},o=[],s=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("8a79"),n("159b"),n("ade3"));function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var r={name:"database-config",props:{initConfigInfo:{type:Function,required:!0},configLoading:Boolean},data:function(){return{form:{dbEnine:"",isDBSync:!1,isOpenTransaction:"",needToUpdateAsset:!1,dbCustom:""},checkDBCustom:!1,showContent:!0,loading:!1}},computed:{formRules:function(){var t=this,e=function(e,n,i){t.checkDBCustom&&!t.form.dbCustom.endsWith(".jar")?i(new Error(t.$t("configuration.valid.pathEndJAR"))):i()};return{dbCustom:[{required:this.checkDBCustom,message:this.$t("base.pleaseInput"),trigger:"blur"},{validator:e,trigger:"blur"}]}}},created:function(){this.getConfigInfo()},methods:{getConfigInfo:function(){var t=this;this.initConfigInfo().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.form.dbEnine=e.storage_db_engine,t.form.isDBSync=e.storage_db_sync,t.form.isOpenTransaction=e.storage_transHistory_switch,t.form.needToUpdateAsset=e.storage_needToUpdateAsset,t.form.dbCustom=e.storage_db_custom||"",t.checkDBCustom=!!t.form.dbCustom}))},handleChangeCheckCustom:function(t){t&&setTimeout(this.$refs["db-custom"].clearValidate,0)},handleSubmit:function(){var t=this;this.$refs["database-config-form"].validate((function(e){e&&(t.loading=!0,t.$_api.configuration.dbConfig(c({},t.form,{dbCustom:t.checkDBCustom?t.form.dbCustom:""}),(function(e){t.loading=!1,e||(t.$notify({type:"success",title:t.$t("base.successful"),message:t.$t("configuration.databaseSaveSuccess")}),t.$emit("next-step"))})))}))},handleCancel:function(){this.$emit("prev-step")}}},f=r,u=(n("eb3f"),n("2877")),l=Object(u["a"])(f,i,o,!1,null,"a888492a",null);e["default"]=l.exports},"5e1d":function(t,e,n){},"8a79":function(t,e,n){"use strict";var i=n("23e7"),o=n("06cf").f,s=n("50c4"),a=n("5a34"),c=n("1d80"),r=n("ab13"),f=n("c430"),u="".endsWith,l=Math.min,d=r("endsWith"),g=!f&&!d&&!!function(){var t=o(String.prototype,"endsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!g&&!d},{endsWith:function(t){var e=String(c(this));a(t);var n=arguments.length>1?arguments[1]:void 0,i=s(e.length),o=void 0===n?i:l(s(n),i),r=String(t);return u?u.call(e,r,o):e.slice(o-r.length,o)===r}})},c7c7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"custom-config"},[n("ul",{staticClass:"im-steps config-steps"},t._l(t.stepsList,(function(e,i){return n("li",{staticClass:"im-step",class:{"is-active":t.activeIndex===i+1}},[n("div",{staticClass:"im-step__body",on:{click:function(n){return t.handleStep(e,i+1)}}},[n("span",{staticClass:"im-step__body-index"},[t._v(t._s(i+1))]),n("span",{staticClass:"im-step__body-title"},[t._v(t._s(e.title))])])])})),0),n("div",{staticClass:"config-title"},[t._v(t._s(t.activeIndex+". "+t.activeStep.title))]),n(t.activeStep.component,{tag:"component",attrs:{"config-loading":t.configLoading,"init-config-info":t.initConfigInfo},on:{"update:configLoading":function(e){t.configLoading=e},"update:config-loading":function(e){t.configLoading=e},"prev-step":t.handlePrevStep,"next-step":t.handleNextStep}})],1)},o=[],s=(n("c740"),n("d3b7"),n("18b3")),a={name:"custom-config",components:{GenesisConfig:function(){return Promise.all([n.e("chunk-1368f67c"),n.e("chunk-29d3d1c7")]).then(n.bind(null,"1717"))},BaseConfig:function(){return n.e("chunk-0f88cf4a").then(n.bind(null,"ea4d"))},NetworkConfig:function(){return n.e("chunk-687f4c9e").then(n.bind(null,"bada"))},DatabaseConfig:s["default"],P2PConfig:function(){return n.e("chunk-c2da51f0").then(n.bind(null,"56e3"))},ModulesConfig:function(){return n.e("chunk-4053bd85").then(n.bind(null,"4596"))}},data:function(){return{stepsList:[{title:this.$t("configuration.genesisInfo"),path:"genesis",component:"GenesisConfig"},{title:this.$t("configuration.baseConfig"),path:"base",component:"BaseConfig"},{title:this.$t("configuration.netWorkConfig"),path:"network",component:"NetworkConfig"},{title:this.$t("configuration.databaseConfig"),path:"database",component:"DatabaseConfig"},{title:this.$t("configuration.p2pConfig"),path:"p2p",component:"P2PConfig"},{title:this.$t("configuration.moduleFunction"),path:"modules",component:"ModulesConfig"}],configLoading:!1}},computed:{stepPath:function(){return this.$route.params.step},activeIndex:{get:function(){var t=this;return this.stepsList.findIndex((function(e){return e.path===t.stepPath}))+1},set:function(t){this.$router.push({path:"/configuration/custom/"+this.stepsList[t-1].path})}},activeStep:function(){return this.stepsList[this.activeIndex-1]}},created:function(){this.activeMenuIndex()},methods:{activeMenuIndex:function(){this.$eventBus.$emit("menuActiveIndex","/configuration/quick")},handleStep:function(t,e){this.activeIndex=e},handlePrevStep:function(){this.activeIndex-=1},handleNextStep:function(){this.activeIndex+=1},initConfigInfo:function(t){var e=this;return t=t||this.stepPath,new Promise((function(n){e.configLoading=!0,e.$_api.configuration.getConfigInfo({},(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.configLoading=!1,i)return n({});if("genesis"===t)n({genesisAssetConfig:o.genesisAssetConfig,genesisWitnessConfig:o.genesisWitnessConfig});else{var s={base:"baseSettingConfig",network:"networkConfig",database:"dbConfig",p2p:"p2pConfig"};n(o[s[t]])}}))}))}}},c=a,r=(n("03e0"),n("2877")),f=Object(r["a"])(c,i,o,!1,null,"11d80da8",null);e["default"]=f.exports},eb3f:function(t,e,n){"use strict";var i=n("5e1d"),o=n.n(i);o.a},ef49:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4c7867f2.89fea109.js.map