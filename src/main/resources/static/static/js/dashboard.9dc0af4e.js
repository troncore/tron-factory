(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"12c8":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"dashboard"},[e("div",{staticClass:"page-title"},[t._v(t._s(t.$t("Dashboard")))]),e("div",{staticClass:"chain-info im-card"},[e("div",{staticClass:"card-header"},[t._v("区块链信息")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"chain-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("名称")))]),e("div",{staticClass:"value"},[t._v(t._s(t.chainInfo.chainName||"-"))])]),e("div",{staticClass:"chain-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("签名算法")))]),e("div",{staticClass:"value"},[t._v(t._s(t.chainInfo.crypto||"-"))])]),e("div",{staticClass:"chain-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("p2pVersion")))]),e("div",{staticClass:"value"},[t._v(t._s(t.chainInfo.p2pVersion||"-"))])]),e("div",{staticClass:"chain-item"},[e("div",{staticClass:"label"},[e("span",{staticClass:"label-inner"},[t._v(t._s(t.$t("状态"))+" "),e("im-tooltip",{staticClass:"im-tooltip",attrs:{content:t.$t("已发布的区块可正常产块")}})],1)]),e("div",{staticClass:"value"},[t._v(t._s(t.$t(["未发布","发布中","已发布"][t.chainStatus]||"-")))])]),e("div",{staticClass:"chain-item"},[e("div",{staticClass:"label"},[0===t.chainStatus?e("el-button",{staticClass:"im-button mini",attrs:{size:"mini",type:"primary"},on:{click:t.handleUpdate}},[e("i",{staticClass:"el-icon-edit"}),t._v(" "+t._s(t.$t("修改"))+" ")]):t._e(),2===t.chainStatus?e("el-button",{staticClass:"im-button mini",attrs:{size:"mini",type:"primary"},on:{click:t.handleExplorer}},[e("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t.$t("浏览器"))+" ")]):t._e()],1),e("div",{staticClass:"value"},[2===t.chainStatus?e("el-button",{staticClass:"im-button mini",attrs:{size:"mini",disabled:t.deleteLoading},on:{click:t.handleDelete}},[e("i",{class:t.deleteLoading?"el-icon-loading":"el-icon-delete"}),t._v(" "+t._s(t.$t("删除"))+" ")]):t._e()],1)])])]),e("node-list",{attrs:{"chain-status":t.chainStatus},on:{nodeList:t.getNodeList,checkChainPublish:function(i){return t.checkChainPublish()}}})],1)},s=[],n=(e("c740"),e("caad"),e("3e60")),c=e("8e6c"),o={name:"dashboard",components:{ImTooltip:c["a"],NodeList:n["default"]},data:function(){return{chainInfo:{chainName:"",crypto:"",p2pVersion:""},chainStatus:-1,nodeList:[],deleteLoading:!1,timeoutID:null}},created:function(){this.getChainInfo(),this.pollChainStatus()},destroyed:function(){clearTimeout(this.timeoutID)},methods:{getChainInfo:function(){var t=this;this.$_api.getStarted.getChainInfo({},(function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i||(t.chainInfo={chainName:e.chainName,crypto:e.crypto,p2pVersion:e.p2pVersion})}))},pollChainStatus:function(){clearTimeout(this.timeoutID),this.timeoutID=setTimeout(this.checkChainPublish,600)},checkChainPublish:function(){var t=this;this.$_api.getStarted.checkChainPublish({},(function(i,e){if(i)return t.chainStatus=-1,void clearTimeout(t.timeoutID);t.chainStatus=e,[0,2].includes(t.chainStatus)?clearTimeout(t.timeoutID):t.pollChainStatus()}))},handleUpdate:function(){this.$router.push("/get-started/chain-edit")},handleDelete:function(){var t=this;~this.nodeList.findIndex((function(t){return 0!==t.deployStatus}))?this.$notify.warning({title:this.$t("base.warning"),message:this.$t("有未停止的节点，无法删除")}):this.$confirm(this.$t("这将会删除此区块链，是否继续？"),this.$t("base.tips"),{cancelButtonText:this.$t("base.cancel"),confirmButtonText:this.$t("base.delete"),center:!0,customClass:"im-message-box",cancelButtonClass:"im-message-cancel-button",confirmButtonClass:"im-message-confirm-button warning"}).then(this.deleteChain).catch((function(){t.$notify.info({title:t.$t("base.cancel"),message:t.$t("base.cancelDelete")})}))},deleteChain:function(){var t=this;this.deleteLoading=!0,this.$_api.getStarted.deleteChain({},(function(i,e){t.deleteLoading=!1,i||(t.$notify.success({title:t.$t("base.successful"),message:t.$t("base.success.delete")}),!0===e&&t.$router.push("/get-started"))}))},getNodeList:function(t){this.nodeList=t},handleExplorer:function(){this.$router.push("/explorer")}}},l=o,r=(e("4347"),e("2877")),u=Object(r["a"])(l,a,s,!1,null,"a358fb2a",null);i["default"]=u.exports},4347:function(t,i,e){"use strict";var a=e("cb7e"),s=e.n(a);s.a},"4e26":function(t,i,e){"use strict";var a=e("568a"),s=e.n(a);s.a},"568a":function(t,i,e){},"8e6c":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-tooltip",{attrs:{effect:t.effect,placement:t.placement}},[e("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.content)},slot:"content"}),e("i",{staticClass:"icon-question fa fa-question-circle-o",style:t.myStyle})])},s=[],n={name:"im-tooltip",props:{effect:{type:String,default:"dark"},placement:{type:String,default:"top"},content:{},marginLeft:String,marginRight:String},computed:{myStyle:function(){var t={};return"undefined"!==typeof this.marginLeft&&(t.marginLeft=this.marginLeft),"undefined"!==typeof this.marginRight&&(t.marginRight=this.marginRight),t}}},c=n,o=(e("4e26"),e("2877")),l=Object(o["a"])(c,a,s,!1,null,"cc688580",null);i["a"]=l.exports},c740:function(t,i,e){"use strict";var a=e("23e7"),s=e("b727").findIndex,n=e("44d2"),c="findIndex",o=!0;c in[]&&Array(1)[c]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},cb7e:function(t,i,e){}}]);
//# sourceMappingURL=dashboard.9dc0af4e.js.map