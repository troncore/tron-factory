{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./src/views/deploy-nodes/index.vue?ca5c","webpack:///./src/views/deploy-nodes/components/LogDialog.vue?bd7c","webpack:///src/views/deploy-nodes/components/LogDialog.vue","webpack:///./src/views/deploy-nodes/components/LogDialog.vue?55d7","webpack:///./src/views/deploy-nodes/components/LogDialog.vue","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./src/views/deploy-nodes/index.vue?7419","webpack:///src/views/deploy-nodes/index.vue","webpack:///./src/views/deploy-nodes/index.vue?c508","webpack:///./src/views/deploy-nodes/index.vue","webpack:///./src/views/deploy-nodes/components/DeployDialog.vue?0b8b","webpack:///src/views/deploy-nodes/components/DeployDialog.vue","webpack:///./src/views/deploy-nodes/components/DeployDialog.vue?7305","webpack:///./src/views/deploy-nodes/components/DeployDialog.vue","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js"],"names":["$","$values","values","target","stat","O","render","_vm","this","_h","$createElement","_c","_self","attrs","dialogVisible","on","$event","staticClass","slot","_v","_s","$t","directives","name","rawName","value","expression","_l","activity","index","key","staticStyle","processingLoading","processingText","staticRenderFns","component","aFunction","toObject","fails","sloppyArrayMethod","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","SLOPPY_METHOD","FORCED","proto","forced","comparefn","call","batchDeployLoading","handleOpenDeployDialog","tableData","handleSelectionChange","scopedSlots","_u","fn","scope","row","handleViewDeployLog","deployDialogVisible","handleDeploy","_e","logDialogVisible","currentViewRow","components","data","tableLoading","tableSelections","computed","batchDeployBtnType","length","created","getNodeList","methods","$_api","nodeList","allNodeInfo","err","val","$message","type","message","deployNode","Promise","id","node","isSR","path","params","filePath","resolve","refreshDeployedNodeList","loading","clearInterval","timeID","Object","res","every","minRows","maxRows","model","form","callback","$$v","$set","trim","handleSubmit","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","keys","i","result","push","module","exports","entries","$indexOf","indexOf","nativeIndexOf","NEGATIVE_ZERO","searchElement","apply","arguments"],"mappings":"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","file":"static/js/chunk-6268dcb0.1f480463.js","sourcesContent":["var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3fc6dcc7&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3fc6dcc7&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"custom-class\":\"im-dialog\",\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"width\":\"680px\",\"top\":\"200px\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog-header\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.$t('deployNodes.logDialogTitle')))])]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.initLoading),expression:\"initLoading\"}],staticClass:\"dialog-content\"},[_c('el-timeline',_vm._l((_vm.logInfo),function(activity,index){return _c('el-timeline-item',{key:index,attrs:{\"type\":\"primary\"}},[_vm._v(\" \"+_vm._s(activity)+\" \")])}),1),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.processingShow),expression:\"processingShow\"}],staticStyle:{\"margin-left\":\"30px\"},attrs:{\"type\":\"text\",\"loading\":_vm.processingLoading}},[_vm._v(_vm._s(_vm.processingText))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :visible.sync=\"dialogVisible\"\n    custom-class=\"im-dialog\"\n    :close-on-click-modal=\"false\"\n    :close-on-press-escape=\"false\"\n    width=\"680px\"\n    top=\"200px\"\n    center>\n    <div slot=\"title\" class=\"dialog-header\">\n      <div class=\"title\">{{ $t('deployNodes.logDialogTitle') }}</div>\n    </div>\n\n    <div class=\"dialog-content\" v-loading=\"initLoading\">\n\n      <el-timeline>\n        <el-timeline-item\n          v-for=\"(activity, index) in logInfo\"\n          :key=\"index\"\n          type=\"primary\">\n          {{activity }}\n        </el-timeline-item>\n      </el-timeline>\n\n      <el-button type=\"text\" style=\"margin-left: 30px;\" :loading=\"processingLoading\" v-show=\"processingShow\">{{ processingText }}</el-button>\n    </div>\n\n  </el-dialog>\n</template>\n\n<script>\n  export default {\n    name: \"LogDialog\",\n    props: {\n      visible: {},\n      currentRow: {},\n    },\n    data () {\n      return {\n        logInfo: [],\n        initLoading: true,\n        processingShow: false,\n        processingLoading: false,\n        processingText: this.$t('deployNodes.emptyLog'),\n        timeID: null,\n      }\n    },\n    computed: {\n      dialogVisible: {\n        get () {\n          return this.visible\n        },\n        set (val) {\n          this.$emit('update:visible', val)\n        }\n      },\n    },\n\n    created () {\n      this.init()\n    },\n    destroyed () {\n      clearInterval(this.timeID)\n    },\n\n    methods: {\n      init () {\n        this.getLogInfo()\n        this.timeID = setInterval(this.getLogInfo, 1000 * 5)\n      },\n      getLogInfo() {\n        this.$_api.nodeList.getLogInfo({ id: this.currentRow.id }, (err, res = {}) => {\n          this.initLoading = false\n          this.processingShow = true\n          this.processingLoading = true\n          this.processingText = this.$t('deployNodes.loadingLog')\n\n          if (err) {\n            this.processingLoading = false\n            this.processingText = this.$t('deployNodes.emptyLog')\n            clearInterval(this.timeID)\n\n            return\n          }\n\n          this.logInfo = res.logInfo || []\n\n          if (this.logInfo.length) {\n            this.logInfo.forEach(log => {\n              if (log.indexOf('deploy finish') > -1) {\n                this.processingLoading = false\n                this.processingText = this.$t('deployNodes.deployComplete')\n\n                clearInterval(this.timeID)\n\n              } else if (log === 'ssh connect failed') {\n                this.processingLoading = false\n                this.processingText = this.$t('deployNodes.deployFail')\n\n                clearInterval(this.timeID)\n              }\n            })\n          } else {\n            this.processingLoading = false\n            this.processingText = this.$t('deployNodes.emptyLog')\n\n            clearInterval(this.timeID)\n          }\n\n        })\n      },\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LogDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LogDialog.vue?vue&type=template&id=07820194&scoped=true&\"\nimport script from \"./LogDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./LogDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07820194\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar SLOPPY_METHOD = sloppyArrayMethod('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || SLOPPY_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-view deploy-nodes\"},[_c('div',{staticClass:\"box-view\"},[_c('div',{staticClass:\"page-header\"},[_c('el-button',{staticClass:\"im-button large\",attrs:{\"loading\":_vm.batchDeployLoading,\"type\":\"primary\"},on:{\"click\":_vm.handleOpenDeployDialog}},[_vm._v(_vm._s(_vm.$t('deployNodes.batchDeploy')))])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableLoading),expression:\"tableLoading\"}],staticClass:\"custom-table\",attrs:{\"data\":_vm.tableData,\"empty-text\":_vm.$t('base.emptyData'),\"header-align\":\"center\",\"border\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":_vm.$t('deployNodes.sshUserName'),\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"ip\",\"label\":\"HOST\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"port\",\"label\":\"SSH PORT\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('deployNodes.isSR'),\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isSR)?_c('el-tag',{attrs:{\"size\":\"medium\",\"type\":\"success\"}},[_vm._v(\"YES\")]):_c('el-tag',{attrs:{\"size\":\"medium\",\"type\":\"danger\"}},[_vm._v(\"NO\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":_vm.$t('base.operate'),\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleViewDeployLog(scope.row)}}},[_vm._v(_vm._s(_vm.$t('deployNodes.viewLog')))])]}}])})],1)],1),(_vm.deployDialogVisible)?_c('deploy-dialog',{attrs:{\"visible\":_vm.deployDialogVisible},on:{\"update:visible\":function($event){_vm.deployDialogVisible=$event},\"deploy\":_vm.handleDeploy}}):_vm._e(),(_vm.logDialogVisible)?_c('log-dialog',{attrs:{\"visible\":_vm.logDialogVisible,\"current-row\":_vm.currentViewRow},on:{\"update:visible\":function($event){_vm.logDialogVisible=$event}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-view deploy-nodes\">\n\n    <div class=\"box-view\">\n      <div class=\"page-header\">\n        <el-button class=\"im-button large\" :loading=\"batchDeployLoading\" type=\"primary\" @click=\"handleOpenDeployDialog\">{{ $t('deployNodes.batchDeploy') }}</el-button>\n      </div>\n      <el-table\n        :data=\"tableData\"\n        :empty-text=\"$t('base.emptyData')\"\n        v-loading=\"tableLoading\"\n        class=\"custom-table\"\n        header-align=\"center\"\n        border\n        @selection-change=\"handleSelectionChange\">\n\n        <el-table-column type=\"selection\" width=\"100\" align=\"center\"></el-table-column>\n\n        <el-table-column prop=\"id\" label=\"ID\" align=\"center\"></el-table-column>\n\n        <el-table-column prop=\"userName\" :label=\"$t('deployNodes.sshUserName')\" align=\"center\"></el-table-column>\n\n        <el-table-column prop=\"ip\" label=\"HOST\" align=\"center\"></el-table-column>\n\n        <el-table-column prop=\"port\" label=\"SSH PORT\" align=\"center\"></el-table-column>\n\n        <el-table-column :label=\"$t('deployNodes.isSR')\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-tag size=\"medium\" type=\"success\" v-if=\"scope.row.isSR\">YES</el-tag>\n            <el-tag size=\"medium\" type=\"danger\" v-else>NO</el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"status\" :label=\"$t('base.operate')\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" @click=\"handleViewDeployLog(scope.row)\">{{$t('deployNodes.viewLog') }}</el-button>\n          </template>\n        </el-table-column>\n\n      </el-table>\n    </div>\n\n    <!-- deploy node  -->\n    <deploy-dialog\n      v-if=\"deployDialogVisible\"\n      :visible.sync=\"deployDialogVisible\"\n      @deploy=\"handleDeploy\">\n    </deploy-dialog>\n\n    <!-- view deploy log-->\n    <log-dialog\n      v-if=\"logDialogVisible\"\n      :visible.sync=\"logDialogVisible\"\n      :current-row=\"currentViewRow\">\n    </log-dialog>\n  </div>\n</template>\n<script>\nimport DeployDialog from \"./components/DeployDialog\"\nimport LogDialog from \"./components/LogDialog\"\n\nexport default {\n  name: 'deploy-nodes',\n  components: { LogDialog, DeployDialog },\n  data() {\n    return {\n      batchDeployLoading: false,\n\n      tableData: [],\n      tableLoading: false,\n      tableSelections: [],\n      currentViewRow: {},\n\n      deployDialogVisible: false,\n      logDialogVisible: false,\n\n    }\n  },\n  computed: {\n    batchDeployBtnType () {\n      return this.tableSelections.length ?  'success' : 'info'\n    }\n  },\n\n  created() {\n    this.getNodeList()\n  },\n\n  methods: {\n    // get table data\n    getNodeList () {\n      this.tableLoading = true\n      this.$_api.nodeList.allNodeInfo({}, (err, res) => {\n        this.tableLoading = false\n        if (err) return\n\n        this.tableData = res.sort((a, b) => a.id - b.id)\n      })\n    },\n\n    // record selected table data\n    handleSelectionChange(val) {\n      this.tableSelections = val\n    },\n\n    // open deploy dialog\n    handleOpenDeployDialog() {\n      if (!this.tableSelections.length) {\n        this.$message({\n          type: 'warning',\n          message: this.$t('deployNodes.mustSelectNodes'),\n        })\n        return\n      }\n\n      this.deployDialogVisible = true\n    },\n\n    // start deploy node\n    async handleDeploy (params) {\n      this.deployDialogVisible = false\n\n      this.batchDeployLoading = true\n      let deployPromises = this.tableSelections.map(node => this.deployNode(node, params))\n      await Promise.all(deployPromises)\n\n      this.$message({\n        type: 'success',\n        message: this.$t('deployNodes.deployingTips'),\n      })\n\n      this.refreshDeployedNodeList()\n    },\n\n    // deploy node\n    deployNode (node = {}, params = {}) {\n      return new Promise(resolve => {\n        this.$_api.nodeList.deployNode({\n          id: node.id,\n          isSR: node.isSR,\n          path: params.filePath,\n        }, err => {\n          if (err) resolve({id: node.id, ok: false})\n          else resolve({id: node.id, ok: true})\n        })\n      })\n    },\n\n    // refresh deployed node list\n    refreshDeployedNodeList () {\n      let deployedNodeIds = this.tableSelections.map(node => node.id)\n\n      let loading = false\n      let timeID = setInterval(() => {\n        if (!loading) {\n          loading = true // the network may slow\n\n          this.$_api.nodeList.checkNode(deployedNodeIds, (err, res) => {\n            loading = false\n            if (err) {\n              this.batchDeployLoading = false\n              clearInterval(timeID)\n              return\n            }\n\n            // check all deployed node whether if finish deployed\n            if (Object.values(res).every(val => val === 'deploy finish')) {\n              this.batchDeployLoading = false\n              clearInterval(timeID)\n            }\n          })\n        }\n\n      }, 1000 * 5)\n    },\n\n    // view deploy log\n    handleViewDeployLog (row) {\n      this.logDialogVisible = true\n      this.currentViewRow = row\n    },\n\n  },\n}\n</script>\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n.deploy-nodes {\n  .page-header {\n    margin-bottom: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3fc6dcc7&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3fc6dcc7&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fc6dcc7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"custom-class\":\"im-dialog\",\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"width\":\"680px\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog-header\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.$t('deployNodes.deployDialogTitle')))])]),_c('div',{staticClass:\"dialog-content\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4, maxRows: 8 }},model:{value:(_vm.form.filePath),callback:function ($$v) {_vm.$set(_vm.form, \"filePath\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.filePath\"}}),_c('div',{staticClass:\"el-upload__tip\"},[_vm._v(_vm._s(_vm.$t('deployNodes.deployHelpTips')))])],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"im-button\",on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(_vm._s(_vm.$t('base.cancel')))]),_c('el-button',{staticClass:\"im-button\",attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(_vm.$t('base.save')))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :visible.sync=\"dialogVisible\"\n    custom-class=\"im-dialog\"\n    :close-on-click-modal=\"false\"\n    :close-on-press-escape=\"false\"\n    width=\"680px\"\n    center>\n    <div slot=\"title\" class=\"dialog-header\">\n      <div class=\"title\">{{ $t('deployNodes.deployDialogTitle') }}</div>\n    </div>\n\n    <div class=\"dialog-content\">\n      <el-input type=\"textarea\" :autosize=\"{ minRows: 4, maxRows: 8 }\" v-model.trim=\"form.filePath\"></el-input>\n      <div class=\"el-upload__tip\">{{ $t('deployNodes.deployHelpTips') }}</div>\n    </div>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button class=\"im-button\" @click=\"dialogVisible = false\">{{ $t('base.cancel') }}</el-button>\n      <el-button class=\"im-button\" type=\"primary\" @click=\"handleSubmit\" :loading=\"loading\">{{ $t('base.save') }}</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  export default {\n    name: \"deploy-dialog\",\n    props: {\n      visible: {\n        type: Boolean,\n        required: true,\n      },\n\n    },\n    data () {\n      return {\n        form: {\n          filePath: '',\n        },\n        loading: false\n      }\n    },\n    computed: {\n      dialogVisible: {\n        get () {\n          return this.visible\n        },\n        set (val) {\n          this.$emit('update:visible', val)\n        }\n      },\n    },\n    methods: {\n      handleSubmit () {\n        if (!this.form.filePath) {\n          this.$message({\n            type: 'warning',\n            message: this.$t('deployNodes.valid.inputFilePath'),\n          })\n          return\n        }\n\n        // error file\n        if (!~this.form.filePath.indexOf('java-tron-1.0.0.zip')) {\n          this.$message({\n            type: 'warning',\n            message: this.$t('deployNodes.valid.inputRightPath'),\n          })\n          return\n        }\n\n        this.$emit('deploy', this.form)\n      },\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeployDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeployDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DeployDialog.vue?vue&type=template&id=7d5930d4&scoped=true&\"\nimport script from \"./DeployDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./DeployDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d5930d4\",\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar SLOPPY_METHOD = sloppyArrayMethod('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || SLOPPY_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}