(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["node-list"],{"0e06":function(t,e,r){},"169a":function(t,e,r){"use strict";var o=r("3283"),i=r.n(o);i.a},3283:function(t,e,r){},"4e82":function(t,e,r){"use strict";var o=r("23e7"),i=r("1c0b"),n=r("7b0b"),a=r("d039"),s=r("b301"),l=[],c=l.sort,d=a((function(){l.sort(void 0)})),u=a((function(){l.sort(null)})),p=s("sort"),f=d||!u||p;o({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?c.call(n(this)):c.call(n(this),i(t))}})},"81d5":function(t,e,r){"use strict";var o=r("7b0b"),i=r("23cb"),n=r("50c4");t.exports=function(t){var e=o(this),r=n(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),l=a>2?arguments[2]:void 0,c=void 0===l?r:i(l,r);while(c>s)e[s++]=t;return e}},a15b:function(t,e,r){"use strict";var o=r("23e7"),i=r("44ad"),n=r("fc6a"),a=r("b301"),s=[].join,l=i!=Object,c=a("join",",");o({target:"Array",proto:!0,forced:l||c},{join:function(t){return s.call(n(this),void 0===t?",":t)}})},a379:function(t,e,r){"use strict";var o=r("0e06"),i=r.n(o);i.a},cb29:function(t,e,r){var o=r("23e7"),i=r("81d5"),n=r("44d2");o({target:"Array",proto:!0},{fill:i}),n("fill")},eff9:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-view node-list"},[r("div",{staticClass:"page-header"},[r("el-button",{staticClass:"im-button larger",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.handleClickAddBtn}},[t._v(t._s(t.$t("tronNodeAdd")))])],1),r("el-card",{staticClass:"page-body custom-card"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"custom-table",attrs:{data:t.tableData,"empty-text":t.$t("tronNodesNoData"),stripe:""}},[r("el-table-column",{attrs:{prop:"id",label:"ID"}}),r("el-table-column",{attrs:{prop:"userName",label:t.$t("tronNodeName")}}),r("el-table-column",{attrs:{prop:"ip",label:"IP/HOST"}}),r("el-table-column",{attrs:{prop:"port",label:"SSH PORT"}}),r("el-table-column",{attrs:{label:t.$t("tronNodeWhetherIsSR")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isSR?r("el-tag",{attrs:{size:"medium",type:"success"}},[t._v("YES")]):r("el-tag",{attrs:{size:"medium",type:"danger"}},[t._v("NO")])]}}])}),r("el-table-column",{attrs:{"class-name":"operator-btns",label:t.$t("tronNodeOperate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleClickEditBtn(e.row)}}},[r("i",{staticClass:"el-icon-edit"})]),r("span",{staticClass:"divider"},[t._v("|")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleDeleteNode(e.row.id)}}},[r("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),r("div",{staticClass:"page-footer align-right"},[r("el-button",{staticClass:"im-button large",attrs:{type:t.nextBtnType,disabled:t.isNextBtnDisabled},on:{click:t.handleNextStep}},[t._v(t._s(t.$t("base.nextStep")))])],1),t.nodeObj.visible?r("add-or-edit-node-dialog",{attrs:{visible:t.nodeObj.visible,"is-adding":t.nodeObj.isAdding,"node-list":t.tableData,"node-detail":t.nodeObj.detail},on:{"update:visible":function(e){return t.$set(t.nodeObj,"visible",e)},success:t.getNodeList}}):t._e()],1)},i=[],n=(r("a4d3"),r("cb29"),r("4de4"),r("a15b"),r("fb6a"),r("4e82"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"im-dialog","close-on-click-modal":!1,"close-on-press-escape":!1,width:"680px",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[r("div",{staticClass:"title"},[t._v(t._s(t.dialogTitle))]),r("div",{staticClass:"title-info"},[t._v("以下均为必填项")])]),r("div",{staticClass:"dialog-content"},[r("el-form",{ref:"dialog-form",staticClass:"dialog-form",attrs:{rules:t.nodeRules,model:t.form,"label-width":"150px","label-position":"left"}},[r("el-form-item",{attrs:{prop:"id"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v("ID "),r("el-tooltip",{attrs:{effect:"dark",content:t.$t("deploymentNodeIdTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronNodeIDPlaceholder"),disabled:!t.isAdding},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id","string"===typeof e?e.trim():e)},expression:"form.id"}})],1),r("el-form-item",{attrs:{prop:"userName"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.$t("tronNodeName"))+" "),r("el-tooltip",{attrs:{size:"small",effect:"dark",content:t.$t("deploymentNodeUsernameTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronNodeNamePlaceholder")},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName","string"===typeof e?e.trim():e)},expression:"form.userName"}})],1),r("el-form-item",{attrs:{prop:"ip"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" IP "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodeIpTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronNodeIpPlaceholder")},model:{value:t.form.ip,callback:function(e){t.$set(t.form,"ip","string"===typeof e?e.trim():e)},expression:"form.ip"}})],1),r("el-form-item",{attrs:{prop:"port"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" PORT "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodePortTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{maxlength:50,placeholder:t.$t("tronNodePortPlaceholder")},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port","string"===typeof e?e.trim():e)},expression:"form.port"}})],1),r("el-form-item",{attrs:{prop:"isSR"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("tronNodeWhetherIsSR"))+" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodeSrTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-select",{attrs:{placeholder:t.$t("tronNodeSRPlaceholder")},model:{value:t.form.isSR,callback:function(e){t.$set(t.form,"isSR",e)},expression:"form.isSR"}},t._l(t.srAry,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t.form.isSR?[r("el-form-item",{attrs:{prop:"needSyncCheck"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" needSyncCheck "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodeSyncCheckTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-select",{attrs:{placeholder:t.$t("tronNodeSyncCheckPlaceholder")},model:{value:t.form.needSyncCheck,callback:function(e){t.$set(t.form,"needSyncCheck",e)},expression:"form.needSyncCheck"}},t._l(t.syncCheckAry,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{prop:"url"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" URL "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodeUrlTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{maxlength:100,placeholder:t.$t("tronNodeUrlPlaceholder")},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url","string"===typeof e?e.trim():e)},expression:"form.url"}})],1),r("el-form-item",{attrs:{prop:"voteCount"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" voteCount "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("tronNodeVoteNumberTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{maxlength:20,placeholder:t.$t("tronNodeVoteNumberPlaceholder")},model:{value:t.form.voteCount,callback:function(e){t.$set(t.form,"voteCount","string"===typeof e?e.trim():e)},expression:"form.voteCount"}})],1),t.isAdding?t._e():r("el-form-item",{staticClass:"publickey"},[r("span",{staticStyle:{"padding-left":"12px"},attrs:{slot:"label"},slot:"label"},[t._v(" publicKey "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodePublickKeyTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),t._v(" "+t._s(t.form.publicKey)+" ")]),r("el-form-item",{attrs:{prop:"privateKey"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" privateKey "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("deploymentNodePrivateKeyTips"),placement:"top"}},[r("i",{staticClass:"im-icon-info"})])],1),r("el-input",{attrs:{type:"textarea",maxlength:1e3,placeholder:t.$t("tronNodePrivateKeyPlaceholder")},model:{value:t.form.privateKey,callback:function(e){t.$set(t.form,"privateKey","string"===typeof e?e.trim():e)},expression:"form.privateKey"}})],1)]:t._e()],2)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"im-button",on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("base.cancel")))]),r("el-button",{staticClass:"im-button",attrs:{type:"primary",loading:t.saveLoading},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("base.save")))])],1)])},s=[],l=(r("c740"),r("d3b7"),r("96cf"),r("1da1")),c=r("61f7");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p={name:"operationNode",props:["visible","isAdding","nodeDetail","nodeList"],data:function(){return{saveLoading:!1,dialogTitle:this.$t("tronNodeAdd"),form:{id:"",userName:"",ip:"",port:"",isSR:""},srAry:[{id:0,label:this.$t("tronNodeSrIs"),value:!0},{id:1,label:this.$t("tronNodeSrNo"),value:!1}],syncCheckAry:[{id:0,label:this.$t("tronNodeSrIs"),value:!0},{id:1,label:this.$t("tronNodeSrNo"),value:!1}]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},nodeRules:function(){var t=this,e=function(e,r,o){Object(c["d"])(r)?o():o(new Error(t.$t("tronSettingNumberPlaceholder")))},r=function(e,r,o){Object(c["c"])(r)?o():o(new Error(t.$t("tronSettingNumberZeroPlaceholder")))},o=function(e,r,o){Object(c["b"])(r)?o():o(new Error(t.$t("tronNodeIpValidate")))},i=function(e,r,o){"127.0.0.1"==r?o(new Error(t.$t("tronNodeIpLocalValidate"))):o()},n=function(e,r,o){r>2147483647?o(new Error(t.$t("tronNumberPlaceholder"))):o()},a=function(e,r,o){r>65535?o(new Error(t.$t("tronPortNumberPlaceholder"))):o()},s=function(e,r,o){64!==r.length?o(new Error(t.$t("tronNodeCorrectPrivateKeyPlaceholder"))):o()},l={id:[{required:!0,message:this.$t("tronNodeIDPlaceholder"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"},{required:!0,validator:n,trigger:"blur"}],userName:[{required:!0,message:this.$t("tronNodeNamePlaceholder"),trigger:"blur"}],ip:[{required:!0,message:this.$t("tronNodeIpPlaceholder"),trigger:"blur"},{required:!0,validator:o,trigger:"blur"},{required:!0,validator:i,trigger:"blur"}],port:[{required:!0,message:this.$t("tronNodePortPlaceholder"),trigger:"blur"},{required:!0,validator:e,trigger:"blur"},{required:!0,validator:a,trigger:"blur"}],isSR:{required:!0,message:this.$t("tronNodeSRPlaceholder"),trigger:"blur"},needSyncCheck:{required:!0,message:this.$t("tronNodeSyncCheckPlaceholder"),trigger:"change"},url:[{required:!0,message:this.$t("tronNodeUrlPlaceholder"),trigger:"blur"}],voteCount:[{required:!0,message:this.$t("tronNodeVoteNumberTips"),trigger:"blur"},{required:!0,validator:r,trigger:"blur"}],privateKey:[{required:!0,message:this.$t("tronNodePrivateKeyPlaceholder"),trigger:"blur"},{required:!0,validator:s,trigger:"blur"}]};return l}},watch:{isAdding:{handler:function(t){this.dialogTitle=t?this.$t("tronNodeAdd"):this.$t("tronNodeEditTitle")},immediate:!0}},created:function(){this.initForm()},methods:{initForm:function(){this.form=u({},this.form,{},this.nodeDetail)},handleSubmit:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs["dialog-form"].validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(r){var o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return o={},e.saveLoading=!0,t.next=5,e.formatParams(o);case 5:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:i=e.isAdding?"addNoteInfo":"editNoteInfo",n=e.isAdding?"tronNodeAddSuccess":"tronNodeEditSuccess",e.$_api.nodeList[i](o,(function(t){e.saveLoading=!1,t||(e.$emit("success",!0),e.$message.success(e.$t(n)),e.dialogVisible=!1)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),formatParams:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object.assign(e,u({},this.form,{url:'"'.concat(this.form.url,'"')})),t.next=3,this.checkBalance(e.voteCount);case 3:if(t.sent){t.next=6;break}return this.saveLoading=!1,t.abrupt("return",!1);case 6:if(r=Array(64).fill("*").join(""),e.privateKey===r&&delete e.privateKey,o=this.isAdding&&~this.nodeList.findIndex((function(t){return t.ip===e.ip})),!o){t.next=13;break}return this.$message.warning(this.$t("tronNodesIpNoSame")),this.saveLoading=!1,t.abrupt("return",!1);case 13:return t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkBalance:function(t){var e=this;return new Promise((function(r){e.$_api.configManage.checkBalance({balance:t},(function(t,o){if(t)return r(!1);o.result?r(!0):(e.$message.error(e.$t("tronNodevoteCountNumberMaxPlaceholder")),r(!1))}))}))}}},f=p,m=(r("169a"),r("2877")),b=Object(m["a"])(f,a,s,!1,null,"3ca6abd5",null),h=b.exports,g=r("2f62");function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var N={name:"node-list",components:{AddOrEditNodeDialog:h},data:function(){return{testVisible:!1,tableData:[],listLoading:!1,nextBtnType:"info",isNextBtnDisabled:!0,nodeObj:{visible:!1,detail:{},isAdding:0}}},created:function(){this.getNodeList()},methods:y({},Object(g["c"])("app",{updateAuthMenu:"SET_AUTH_MENU"}),{getNodeList:function(){var t=this;this.$_api.nodeList.allNodeInfo({},(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e||(r.length>0?(t.nextBtnType="primary",t.isNextBtnDisabled=!1):(t.nextBtnType="info",t.isNextBtnDisabled=!0),t.tableData=r.sort((function(t,e){return t.id-e.id})))}))},handleClickAddBtn:function(){this.tableData.length>20?this.$message({type:"info",message:this.$t("tronNodesMaxTips")}):(this.nodeObj.detail={url:"http://"},this.nodeObj.isAdding=!0,this.nodeObj.visible=!0)},handleClickEditBtn:function(t){this.nodeObj.detail=y({},t,{url:JSON.stringify(t.url).slice(3).slice(0,-3),privateKey:Array(64).fill("*").join("")}),sessionStorage.setItem("currentnode",t.ip),this.nodeObj.isAdding=!1,this.nodeObj.visible=!0},handleDeleteNode:function(t){var e=this;this.$confirm(this.$t("tronNodesDeleteTips"),this.$t("tronNodesDeleteTipsTitle"),{confirmButtonText:this.$t("tronNodeDetermine"),cancelButtonText:this.$t("tronNodeCancel"),type:"warning",center:!0,customClass:"im-message-box",cancelButtonClass:"im-message-cancel-button",confirmButtonClass:"im-message-confirm-button"}).then((function(){e.$_api.nodeList.deleteNoteInfo({id:t},(function(t){t||(e.$message.success(e.$t("tronNodesDeleteSuccess")),e.getNodeList())}))})).catch((function(){e.$message({type:"info",message:e.$t("tronNodesCancelDelete")})}))},handleNextStep:function(){var t=this;this.$_api.nodeList.initConfig({},(function(e){e||(t.updateAuthMenu({name:"config-manage"}),t.$router.push({path:"/config-manage"}))}))}})},$=N,C=(r("a379"),Object(m["a"])($,o,i,!1,null,"d912258a",null));e["default"]=C.exports}}]);
//# sourceMappingURL=node-list.11f69b2b.js.map