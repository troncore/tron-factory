(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["node-add-edit"],{1832:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"node-add-edit"},[a("div",{staticClass:"page-title"},[e._v(e._s(e.$t(this.isAddPage?"getStarted.nodesManage.addNode":"getStarted.nodesManage.editNode")))]),a("el-form",{ref:"form",attrs:{rules:e.formRules,model:e.form,size:"medium","label-width":"150px","label-position":"left"}},[a("div",{staticClass:"chain-info im-card"},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.nodesManage.serverInfo")))]),a("div",{staticClass:"card-body"},[a("el-form-item",{attrs:{prop:"ip"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.nodesManage.ip")))]),a("el-input",{staticClass:"width-400",attrs:{tabindex:"1",clearable:"",placeholder:e.$t("getStarted.nodesManage.ipPlaceholder")},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip","string"===typeof t?t.trim():t)},expression:"form.ip"}})],1),a("el-form-item",{attrs:{prop:"listenPort"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.nodesManage.listenPort")))]),a("el-input",{staticClass:"width-400",attrs:{type:"number",min:"1",max:"65535",tabindex:"2",clearable:"",placeholder:e.$t("getStarted.nodesManage.listenPortPlaceholder")},model:{value:e.form.listenPort,callback:function(t){e.$set(e.form,"listenPort","string"===typeof t?t.trim():t)},expression:"form.listenPort"}})],1)],1),a("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.nodesManage.sshInfo")))]),a("div",{staticClass:"card-body"},[a("el-form-item",{attrs:{prop:"sshConnectType"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.nodesManage.sshConnectType")))]),a("el-radio",{attrs:{label:2},model:{value:e.form.sshConnectType,callback:function(t){e.$set(e.form,"sshConnectType",t)},expression:"form.sshConnectType"}},[e._v(e._s(e.$t("getStarted.nodesManage.byPublicKey")))]),a("el-radio",{attrs:{label:1},model:{value:e.form.sshConnectType,callback:function(t){e.$set(e.form,"sshConnectType",t)},expression:"form.sshConnectType"}},[e._v(e._s(e.$t("getStarted.nodesManage.byPassword")))])],1),a("div",{staticClass:"line-item",class:{"margin-bottom-0":2===e.form.sshConnectType}},[a("el-form-item",{staticClass:"inline-block",attrs:{prop:"userName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.nodesManage.sshUserName")))]),a("el-input",{staticClass:"width-400",attrs:{tabindex:"4",clearable:"",placeholder:e.$t("getStarted.nodesManage.sshUserNamePlaceholder")},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"===typeof t?t.trim():t)},expression:"form.userName"}})],1),a("el-form-item",{staticClass:"inline-block",attrs:{prop:"port","label-width":"100px"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.nodesManage.port")))]),a("el-input",{staticClass:"width-300",attrs:{type:"number",min:"1",max:"65535",tabindex:"3",clearable:"",placeholder:e.$t("getStarted.nodesManage.portPlaceholder")},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port","string"===typeof t?t.trim():t)},expression:"form.port"}})],1)],1),1===e.form.sshConnectType?a("el-form-item",{staticClass:"margin-bottom-0",attrs:{prop:"sshPassword"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.nodesManage.sshPassword")))]),a("el-input",{staticClass:"width-400",attrs:{tabindex:"5",clearable:"",placeholder:e.$t("getStarted.nodesManage.sshPasswordPlaceholder")},model:{value:e.form.sshPassword,callback:function(t){e.$set(e.form,"sshPassword","string"===typeof t?t.trim():t)},expression:"form.sshPassword"}})],1):e._e()],1)]),a("div",{staticClass:"chain-info im-card"},[a("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.nodesManage.nodeType")))]),a("div",{staticClass:"card-body"},[a("el-form-item",{class:{"margin-bottom-0":!e.form.isSR},attrs:{prop:"isSR","label-width":"0"}},[a("el-radio",{attrs:{label:!0},model:{value:e.form.isSR,callback:function(t){e.$set(e.form,"isSR",t)},expression:"form.isSR"}},[e._v(e._s(e.$t("getStarted.nodesManage.superNode"))+" "),a("im-tooltip",{attrs:{content:e.$t("getStarted.nodesManage.superNodeTips")}})],1),a("el-radio",{attrs:{label:!1},model:{value:e.form.isSR,callback:function(t){e.$set(e.form,"isSR",t)},expression:"form.isSR"}},[e._v(e._s(e.$t("getStarted.nodesManage.fullNode"))+" "),a("im-tooltip",{attrs:{content:e.$t("getStarted.nodesManage.fullNodeTips")}})],1)],1)],1),e.form.isSR?a("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.nodesManage.superNodeInfo")))]):e._e(),e.form.isSR?a("div",{staticClass:"card-body"},[a("el-form-item",{attrs:{prop:"url"}},[a("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.nodesManage.url"))+" "),a("im-tooltip",{attrs:{content:e.$t("getStarted.nodesManage.urlTips")}})],1),a("el-input",{staticClass:"width-400",attrs:{tabindex:"6",clearable:"",placeholder:e.$t("getStarted.nodesManage.urlPlaceholder")},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url","string"===typeof t?t.trim():t)},expression:"form.url"}})],1),a("el-form-item",{attrs:{prop:"voteCount"}},[a("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.nodesManage.voteCount"))+" "),a("im-tooltip",{attrs:{content:e.$t("getStarted.nodesManage.voteCountTips")}})],1),a("el-input",{staticClass:"width-400",attrs:{tabindex:"7",clearable:"",placeholder:e.$t("getStarted.nodesManage.voteCountPlaceholder")},model:{value:e.form.voteCount,callback:function(t){e.$set(e.form,"voteCount","string"===typeof t?t.trim():t)},expression:"form.voteCount"}})],1),a("el-form-item",{staticClass:"address",attrs:{prop:"publicKey"}},[a("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.nodesManage.publicKey"))+" "),a("im-tooltip",{attrs:{content:e.$t("getStarted.nodesManage.publicKeyTips")}})],1),a("el-input",{staticClass:"width-600",attrs:{tabindex:"8",clearable:"",placeholder:e.$t("getStarted.nodesManage.publicKeyPlaceholder")},model:{value:e.form.publicKey,callback:function(t){e.$set(e.form,"publicKey","string"===typeof t?t.trim():t)},expression:"form.publicKey"}})],1),a("el-form-item",{staticClass:"private-key margin-bottom-0",attrs:{prop:"privateKey"}},[a("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.nodesManage.privateKey"))+" "),a("im-tooltip",{attrs:{content:e.$t("getStarted.nodesManage.privateKeyTips")}})],1),a("el-input",{staticClass:"width-600",attrs:{tabindex:"9",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("getStarted.nodesManage.privateKeyPlaceholder")},model:{value:e.form.privateKey,callback:function(t){e.$set(e.form,"privateKey","string"===typeof t?t.trim():t)},expression:"form.privateKey"}})],1)],1):e._e()])]),a("div",{staticClass:"page-footer"},[a("el-button",{staticClass:"im-button large",attrs:{type:"primary",disabled:e.disabled,loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t(e.isAddPage?"base.add":"base.modify")))]),a("el-button",{staticClass:"im-button large",on:{click:e.handleCancel}},[e._v(e._s(e.$t("base.cancel")))])],1)],1)},s=[],n=(a("99af"),a("cb29"),a("a15b"),a("fb6a"),a("a9e3"),a("8ba4"),a("5530")),i=a("8e6c"),o=a("cf45"),l=a("61f7"),d={name:"node-add-edit",components:{ImTooltip:i["a"]},data:function(){return{form:{ip:"",listenPort:"",port:22,sshConnectType:2,userName:"",sshPassword:"",isSR:!0,url:"http://",voteCount:"",publicKey:"",privateKey:""},nodeInfo:{},tempPublicKey:"",safePrivateKey:Array(64).fill("*").join(""),disabled:!1,loading:!1,disableLocalhost:!1}},computed:{isAddPage:function(){return"node-add"===this.$route.params.status},opNodeId:function(){var e=this.$route.query.id;return/\d+/.test(e)?Number(e):void 0},formRules:function(){var e=this,t=BigInt(Math.pow(2,63))-BigInt(1),a=function(a,r,s){var n="";/^(-)?\d+$/.test(r)?r<0?n=e.$t("base.valid.gteZeroInt"):BigInt(r)>t&&(n=e.$t("base.valid.maxNumberValue")+": "+t):n=e.$t("base.valid.integer"),n?s(new Error(n)):s()},r=function(t,a,r){e.disableLocalhost&&"127.0.0.1"===a?r(new Error(e.$t("getStarted.nodesManage.ipCheckLocalhost"))):r()},s=function(t,a,r){64!==a.length?r(new Error(e.$t("getStarted.nodesManage.privateKeyCheck"))):r()},n=[{validator:l["a"].numMin(0,this.$t("base.valid.gtZeroInt"),!1),trigger:"blur"},{validator:l["a"].numMax(65535,this.$t("base.valid.maxPortValue")),trigger:"blur"}];return{ip:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{validator:l["a"].validIP(this.$t("getStarted.nodesManage.ipCheckRight")),trigger:"blur"},{required:!0,validator:r,trigger:"blur"}],listenPort:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}].concat(n),userName:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}],port:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}].concat(n),sshPassword:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}],url:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}],voteCount:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{validator:a,trigger:"blur"}],publicKey:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}],privateKey:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{required:!0,validator:s,trigger:"blur"}]}}},created:function(){this.getNodeInfo()},methods:{getNodeInfo:function(){var e=this;if(this.isAddPage||!this.validNode)return!1;this.form.isSR=!1,this.form.sshConnectType=2,this.disabled=!0,this.$_api.getStarted.getNodeInfo({id:this.opNodeId},(function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(e.disabled=!1,e.nodeInfo=a,e.initForm())}))},initForm:function(){var e=this.nodeInfo;this.form={ip:e.ip||"",listenPort:e.listenPort||"",sshConnectType:Number(e.sshConnectType)||1,userName:e.userName||"",port:e.port||22,sshPassword:e.sshPassword||"",isSR:!e.hasOwnProperty("isSR")||Boolean(e.isSR),url:JSON.stringify(e.url).slice(3).slice(0,-3)||"http://",voteCount:e.voteCount||"",publicKey:e.publicKey||"",privateKey:e.publicKey?this.safePrivateKey:""},this.tempPublicKey=e.publicKey},handleSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={};if(!e.initParams(a))return;a.isSR&&(a.publicKey!==e.tempPublicKey||a.privateKey)?e.$confirm(e.$t("getStarted.nodesManage.saveAddressPriKey"),e.$t("base.tips"),{cancelButtonText:e.$t("base.cancel"),confirmButtonText:e.$t("base.confirm"),center:!0,customClass:"im-message-box",cancelButtonClass:"im-message-cancel-button primary",confirmButtonClass:"im-message-confirm-button primary"}).then((function(){return e.addNode(a)})).catch((function(){e.$notify.info({title:e.$t("base.cancel"),message:e.$t("base.cancel")})})):e.addNode(a)}}))},initParams:function(e){if(!this.isAddPage&&!this.validNode)return!1;var t={ip:this.form.ip,listenPort:Number(this.form.listenPort),userName:this.form.userName,port:Number(this.form.port),sshConnectType:this.form.sshConnectType,sshPassword:1===this.form.sshConnectType?this.form.sshPassword:void 0,isSR:this.form.isSR},a={url:'"'.concat(this.form.url,'"'),voteCount:Object(o["b"])(this.form.voteCount),publicKey:this.form.publicKey,privateKey:this.form.privateKey!==this.safePrivateKey?this.form.privateKey:void 0};return Object.assign(e,Object(n["a"])(Object(n["a"])({id:!this.isAddPage&&Number.isInteger(this.opNodeId)?this.opNodeId:void 0},t),t.isSR&&a)),!0},validNode:function(){return!!/\d+/.test(this.opNodeId)||(this.$notify.warning({title:this.$t("base.warning"),message:this.$t("getStarted.nodesManage.opUnValidNode")}),!1)},addNode:function(e){var t=this;this.loading=!0;var a=this.isAddPage?"addNoteInfo":"editNoteInfo";this.$_api.getStarted[a](e,(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.loading=!1,!e)if(a.hasOwnProperty("status")){var r="";switch(a.status){case 1:r="getStarted.nodesManage.sshConnectFail";break;case 2:r="getStarted.nodesManage.addressNotPrivateKey";break;default:r="base.error"}t.$notify.error({title:t.$t("base.error"),message:t.$t(r)})}else{var s=t.isAddPage?"getStarted.nodesManage.addNodeSuccess":"getStarted.nodesManage.updateNodeSuccess";t.$notify.success({title:t.$t("base.successful"),message:t.$t(s)}),t.$router.push("/get-started")}}))},handleCancel:function(){history.back()}}},c=d,u=(a("dab8"),a("2877")),f=Object(u["a"])(c,r,s,!1,null,"6bdb17be",null);t["default"]=f.exports},"4e26":function(e,t,a){"use strict";var r=a("568a"),s=a.n(r);s.a},"568a":function(e,t,a){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("1d80"),s=a("5899"),n="["+s+"]",i=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),l=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(i,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5e89":function(e,t,a){var r=a("861d"),s=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&s(e)===e}},"61f7":function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}a.d(t,"a",(function(){return d}));var i=function(){function e(){r(this,e)}return n(e,[{key:"isNumber",value:function(e){return/^\d+(\.\d+)?$/.test(e)}},{key:"isInteger",value:function(e){return/^\d+$/.test(e)}},{key:"isTwoDecimal",value:function(e){return/^([1-9]\d*|0)(\.\d{1,2})$/.test(e)}},{key:"isIP",value:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)}}]),e}(),o=new i,l=function(){function e(){r(this,e)}return n(e,[{key:"validIP",value:function(e){return function(t,a,r){var s=!1;o.isIP(a)||(s=!0),s?r(new Error(e)):r()}}},{key:"numEqual",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,s,n){var i=!1;o.isNumber(s)?s==e?i=!0:a||s==e||(i=!0):i=!0,i?n(new Error(t)):n()}}},{key:"numMin",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s,n,i){var l=!1;o.isNumber(n)?r&&!o.isInteger(n)||n<e?l=!0:a||n!=e||(l=!0):l=!0,l?i(new Error(t)):i()}}},{key:"numMax",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s,n,i){var l=!1;o.isNumber(n)?r&&!o.isInteger(n)||n>e?l=!0:a||n!=e||(l=!0):l=!0,l?i(new Error(t)):i()}}},{key:"numTwoDecimal",value:function(e){return function(t,a,r){var s=!1;o.isTwoDecimal(a)||(s=!0),s?r(new Error(e)):r()}}}]),e}(),d=new l},7156:function(e,t,a){var r=a("861d"),s=a("d2bb");e.exports=function(e,t,a){var n,i;return s&&"function"==typeof(n=t.constructor)&&n!==a&&r(i=n.prototype)&&i!==a.prototype&&s(e,i),e}},"81d5":function(e,t,a){"use strict";var r=a("7b0b"),s=a("23cb"),n=a("50c4");e.exports=function(e){var t=r(this),a=n(t.length),i=arguments.length,o=s(i>1?arguments[1]:void 0,a),l=i>2?arguments[2]:void 0,d=void 0===l?a:s(l,a);while(d>o)t[o++]=e;return t}},"8ba4":function(e,t,a){var r=a("23e7"),s=a("5e89");r({target:"Number",stat:!0},{isInteger:s})},"8e6c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{attrs:{effect:e.effect,placement:e.placement}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.content)},slot:"content"}),a("i",{staticClass:"icon-question fa fa-question-circle-o",style:e.myStyle})])},s=[],n={name:"im-tooltip",props:{effect:{type:String,default:"dark"},placement:{type:String,default:"top"},content:{},marginLeft:String,marginRight:String},computed:{myStyle:function(){var e={};return"undefined"!==typeof this.marginLeft&&(e.marginLeft=this.marginLeft),"undefined"!==typeof this.marginRight&&(e.marginRight=this.marginRight),e}}},i=n,o=(a("4e26"),a("2877")),l=Object(o["a"])(i,r,s,!1,null,"cc688580",null);t["a"]=l.exports},"99af":function(e,t,a){"use strict";var r=a("23e7"),s=a("d039"),n=a("e8b5"),i=a("861d"),o=a("7b0b"),l=a("50c4"),d=a("8418"),c=a("65f0"),u=a("1dde"),f=a("b622"),p=a("2d00"),m=f("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",h=p>=51||!s((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=u("concat"),y=function(e){if(!i(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},$=!h||!v;r({target:"Array",proto:!0,forced:$},{concat:function(e){var t,a,r,s,n,i=o(this),u=c(i,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?i:arguments[t],y(n)){if(s=l(n.length),f+s>g)throw TypeError(b);for(a=0;a<s;a++,f++)a in n&&d(u,f,n[a])}else{if(f>=g)throw TypeError(b);d(u,f++,n)}return u.length=f,u}})},a15b:function(e,t,a){"use strict";var r=a("23e7"),s=a("44ad"),n=a("fc6a"),i=a("a640"),o=[].join,l=s!=Object,d=i("join",",");r({target:"Array",proto:!0,forced:l||!d},{join:function(e){return o.call(n(this),void 0===e?",":e)}})},a9e3:function(e,t,a){"use strict";var r=a("83ab"),s=a("da84"),n=a("94ca"),i=a("6eeb"),o=a("5135"),l=a("c6b6"),d=a("7156"),c=a("c04e"),u=a("d039"),f=a("7c73"),p=a("241c").f,m=a("06cf").f,g=a("9bf2").f,b=a("58a8").trim,h="Number",v=s[h],y=v.prototype,$=l(f(y))==h,S=function(e){var t,a,r,s,n,i,o,l,d=c(e,!1);if("string"==typeof d&&d.length>2)if(d=b(d),t=d.charCodeAt(0),43===t||45===t){if(a=d.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+d}for(n=d.slice(2),i=n.length,o=0;o<i;o++)if(l=n.charCodeAt(o),l<48||l>s)return NaN;return parseInt(n,r)}return+d};if(n(h,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,N=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof N&&($?u((function(){y.valueOf.call(a)})):l(a)!=h)?d(new v(S(t)),a,N):S(t)},w=r?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;w.length>P;P++)o(v,C=w[P])&&!o(N,C)&&g(N,C,m(v,C));N.prototype=y,y.constructor=N,i(s,h,N)}},cb29:function(e,t,a){var r=a("23e7"),s=a("81d5"),n=a("44d2");r({target:"Array",proto:!0},{fill:s}),n("fill")},dab8:function(e,t,a){"use strict";var r=a("f9be"),s=a.n(r);s.a},f9be:function(e,t,a){}}]);
//# sourceMappingURL=node-add-edit.d8456a13.js.map