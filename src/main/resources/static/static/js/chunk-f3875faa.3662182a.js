(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3875faa","chunk-29d3d1c7","chunk-2d213371"],{1717:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box-view genesis-config"},[s("div",{staticClass:"box-body"},[s("div",{staticClass:"asset-list"},[s("div",{staticClass:"asset-title"},[e._v(e._s(e.$t("configuration.accountInfo"))),s("span",{staticClass:"numbers"},[e._v("（"+e._s(e.genesisBlockAssets.length)+"）")])]),e._l(e.genesisBlockAssets,(function(t,i){return s("div",{key:i,staticClass:"asset-item"},[s("el-button",{staticClass:"op-btn",on:{click:function(s){return e.handleAddAsset(!1,t,i)}}},[s("i",{staticClass:"el-icon-edit"}),e._v(" "+e._s(t.accountName))]),s("i",{staticClass:"op-icon el-icon-delete",on:{click:function(t){return e.handleDeleteAssets(i)}}})],1)})),s("div",{staticClass:"asset-item new-add",on:{click:e.handleAddAsset}},[s("el-button",{staticClass:"op-btn"},[e._v(e._s(e.$t("configuration.addNew")))]),s("i",{staticClass:"op-icon el-icon-circle-plus-outline"})],1)],2),s("div",{staticClass:"asset-list"},[s("div",{staticClass:"asset-title"},[e._v(e._s(e.$t("configuration.witnessNodeInfo"))),s("span",{staticClass:"numbers"},[e._v("（"+e._s(e.genesisBlockWitnesses.length)+"）")])]),e._l(e.genesisBlockWitnesses,(function(t,i){return s("div",{key:i,staticClass:"asset-item"},[s("el-button",{staticClass:"op-btn",on:{click:function(s){return e.handleViewWitness(t,i)}}},[s("i",{staticClass:"el-icon-view"}),e._v(" "+e._s(t.address))])],1)}))],2)]),s("div",{staticClass:"box-footer align-right"},[s("el-button",{staticClass:"im-button large",attrs:{loading:e.loading,disabled:e.configLoading,type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("base.nextStep")))])],1),e.assetDialogVisible?s("add-asset-dialog",{attrs:{visible:e.assetDialogVisible,"is-adding":e.isAddingAsset,"genesis-block-assets":e.genesisBlockAssets,"asset-info":e.currentAssetInfo,"asset-index":e.currentAssetIndex},on:{"update:visible":function(t){e.assetDialogVisible=t},success:e.getConfigInfo}}):e._e(),e.witnessDialogVisible?s("view-witness-dialog",{attrs:{visible:e.witnessDialogVisible,"witness-info":e.currentWitnessInfo},on:{"update:visible":function(t){e.witnessDialogVisible=t}}}):e._e()],1)},n=[],o=(s("a4d3"),s("4de4"),s("a434"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("159b"),s("ade3")),a=s("f76b"),r=s("ac70");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"genesis-config",components:{ViewWitnessDialog:r["default"],AddAssetDialog:a["default"]},props:{initConfigInfo:{default:function(){return function(){return Promise.resolve({})}}},configLoading:Boolean},data:function(){return{configInfo:{},isAddingAsset:!0,assetDialogVisible:!1,currentAssetInfo:{},currentAssetIndex:-1,witnessDialogVisible:!1,currentWitnessInfo:{address:"",url:"",voteCount:"",privateKey:""},loading:!1}},computed:{genesisAssetConfig:function(){return this.configInfo.genesisAssetConfig||{}},genesisWitnessConfig:function(){return this.configInfo.genesisWitnessConfig||{}},genesisBlockAssets:function(){return this.genesisAssetConfig.genesis_block_assets||[]},genesisBlockWitnesses:function(){return this.genesisWitnessConfig.genesis_block_witnesses||[]}},created:function(){this.getConfigInfo()},methods:{getConfigInfo:function(){var e=this;this.initConfigInfo("genesis").then((function(t){return e.configInfo=t}))},handleAddAsset:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;this.currentAssetInfo=c({accountName:"",accountType:"",address:"",balance:""},e?{}:t),this.currentAssetIndex=e?this.genesisBlockAssets.length:s,this.isAddingAsset=e,this.assetDialogVisible=!0},handleDeleteAssets:function(e){var t=this;this.genesisBlockAssets.splice(e,1),this.$_api.configuration.genesisAssetConfig({assets:this.genesisBlockAssets},(function(e,s){e||t.$notify({type:"success",title:t.$t("base.successful"),message:t.$t("configuration.assetDeleteSuccess")})}))},handleViewWitness:function(e){this.currentWitnessInfo=e,this.witnessDialogVisible=!0},handleSubmit:function(){this.$emit("next-step")}}},f=u,d=(s("a75c"),s("2877")),g=Object(d["a"])(f,i,n,!1,null,"626b9250",null);t["default"]=g.exports},"327e":function(e,t,s){"use strict";var i=s("7b2b"),n=s.n(i);n.a},"61f7":function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}s.d(t,"a",(function(){return c}));var a=function(){function e(){i(this,e)}return o(e,[{key:"isNumber",value:function(e){return/^\d+(\.\d+)?$/.test(e)}},{key:"isInteger",value:function(e){return/^\d+$/.test(e)}},{key:"isTwoDecimal",value:function(e){return/^([1-9]\d*|0)(\.\d{1,2})$/.test(e)}},{key:"isIP",value:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)}}]),e}(),r=new a,l=function(){function e(){i(this,e)}return o(e,[{key:"validIP",value:function(e){return function(t,s,i){var n=!1;r.isIP(s)||(n=!0),n?i(new Error(e)):i()}}},{key:"numEqual",value:function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(i,n,o){var a=!1;r.isNumber(n)?n==e?a=!0:s||n==e||(a=!0):a=!0,a?o(new Error(t)):o()}}},{key:"numMin",value:function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(n,o,a){var l=!1;r.isNumber(o)?i&&!r.isInteger(o)?l=!0:o<e?l=!0:s||o!=e||(l=!0):l=!0,l?a(new Error(t)):a()}}},{key:"numMax",value:function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(n,o,a){var l=!1;r.isNumber(o)?i&&!r.isInteger(o)?l=!0:o>e?l=!0:s||o!=e||(l=!0):l=!0,l?a(new Error(t)):a()}}},{key:"numTwoDecimal",value:function(e){return function(t,s,i){var n=!1;r.isTwoDecimal(s)||(n=!0),n?i(new Error(e)):i()}}}]),e}(),c=new l},6639:function(e,t,s){},"7b2b":function(e,t,s){},a75c:function(e,t,s){"use strict";var i=s("6639"),n=s.n(i);n.a},ac70:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"im-dialog","close-on-click-modal":!1,"close-on-press-escape":!1,width:"680px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("configuration.witnessDialogTitle")))])]),s("div",{staticClass:"dialog-content"},[s("el-form",{attrs:{model:e.witnessInfo,"label-width":"90px","label-position":"left"}},[s("el-form-item",{attrs:{label:"address :",prop:"address"}},[e._v(" "+e._s(e.witnessInfo.address)+" ")]),s("el-form-item",{attrs:{label:"URL :",prop:"url"}},[e._v(" "+e._s(e.witnessInfo.url)+" ")]),s("el-form-item",{attrs:{label:"voteCount :",prop:"voteCount"}},[e._v(" "+e._s(e.witnessInfo.voteCount)+" ")])],1)],1)])},n=[],o={name:"DialogViewGenesisWitness",props:{visible:{},witnessInfo:{}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}}},a=o,r=s("2877"),l=Object(r["a"])(a,i,n,!1,null,"3a749464",null);t["default"]=l.exports},e27c:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box-view quick-config"},[s("div",{staticClass:"box-body"},[s("div",{staticClass:"box-card"},[s("div",{staticClass:"config-title"},[e._v(e._s(e.$t("configuration.genesisInfo")))]),s("genesis-config",{attrs:{"init-config-info":e.initConfigInfo}})],1),s("div",{staticClass:"box-card"},[s("div",{staticClass:"config-title"},[e._v(e._s(e.$t("configuration.p2pConfig")))]),s("el-form",{ref:"p2p-config-form",staticClass:"im-form",attrs:{rules:e.formRules,model:e.form,"label-position":"top"}},[s("el-form-item",{attrs:{prop:"node_p2p_version",label:"p2pVersion"}},[s("span",{attrs:{slot:"label"},slot:"label"},[e._v("p2pVersion "),s("i",{staticClass:"help-tips"},[e._v("("+e._s(e.$t("configuration.helpTips.p2pVersion"))+")")])]),s("el-input",{attrs:{type:"number",min:"0",max:"2147483647",placeholder:e.$t("base.pleaseInput")},model:{value:e.form.node_p2p_version,callback:function(t){e.$set(e.form,"node_p2p_version","string"===typeof t?t.trim():t)},expression:"form.node_p2p_version"}})],1),s("el-form-item",{attrs:{label:"listenPort",prop:"node_listen_port"}},[s("span",{attrs:{slot:"label"},slot:"label"},[e._v("listenPort "),s("i",{staticClass:"help-tips"},[e._v("("+e._s(e.$t("configuration.helpTips.listenPort"))+")")])]),s("el-input",{attrs:{type:"number",min:"0",max:"65535",placeholder:e.$t("base.pleaseInput")},model:{value:e.form.node_listen_port,callback:function(t){e.$set(e.form,"node_listen_port","string"===typeof t?t.trim():t)},expression:"form.node_listen_port"}})],1)],1)],1)]),s("div",{staticClass:"box-footer align-right"},[s("el-button",{staticClass:"im-button large",attrs:{loading:e.loading,disabled:e.configLoading,type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("base.complete")))])],1)])},n=[],o=(s("99af"),s("d3b7"),s("1717")),a=s("61f7"),r={name:"quick-config",components:{GenesisConfig:o["default"]},data:function(){return{form:{node_p2p_version:"",node_listen_port:""},loading:!1,configLoading:!1}},computed:{formRules:function(){var e=[{validator:a["a"].numMin(0,this.$t("configuration.valid.gteZeroInt")),trigger:"blur"},{validator:a["a"].numMax(2147483647,this.$t("configuration.valid.maxNumberValue")+": 2147483647"),trigger:"blur"}],t=[{validator:a["a"].numEqual(11111,this.$t("configuration.valid.mainnetPlaceholder")+": 11111"),trigger:"blur"},{validator:a["a"].numEqual(20180622,this.$t("configuration.valid.testnetPlaceholder")+": 20180622"),trigger:"blur"},{validator:a["a"].numEqual(1,this.$t("configuration.valid.specialPlaceholder")+": 1"),trigger:"blur"}],s=[{validator:a["a"].numMin(0,this.$t("configuration.valid.gteZeroInt")),trigger:"blur"},{validator:a["a"].numMax(65535,this.$t("configuration.valid.maxPortValue")),trigger:"blur"}];return{node_p2p_version:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}].concat(e,t),node_listen_port:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"}].concat(s)}}},methods:{initConfigInfo:function(e){var t=this;return new Promise((function(s){t.configLoading=!0,t.$_api.configuration.getConfigInfo({},(function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.configLoading=!1,i)return s({});"genesis"===e&&s({genesisAssetConfig:n.genesisAssetConfig,genesisWitnessConfig:n.genesisWitnessConfig}),t.form.node_p2p_version=n.p2pConfig.node_p2p_version,t.form.node_listen_port=n.p2pConfig.node_listen_port}))}))},handleSubmit:function(){var e=this;this.$refs["p2p-config-form"].validate((function(t){if(t){var s={p2pVersion:e.form.node_p2p_version,listenPort:e.form.node_listen_port,configStatus:0};e.loading=!0,e.$_api.configuration.p2pConfig(s,(function(t){e.loading=!1,t||(e.$notify({type:"success",title:e.$t("base.successful"),message:e.$t("base.success.operate")}),e.$router.push({path:"/nodes-manage"}))}))}}))}}},l=r,c=(s("327e"),s("2877")),u=Object(c["a"])(l,i,n,!1,null,"2d5fb20e",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-f3875faa.3662182a.js.map