{"version":3,"sources":["webpack:///./src/views/configuration/custom/components/ModulesConfig/index.vue?5d26","webpack:///src/views/configuration/custom/components/ModulesConfig/index.vue","webpack:///./src/views/configuration/custom/components/ModulesConfig/index.vue?fafa","webpack:///./src/views/configuration/custom/components/ModulesConfig/index.vue","webpack:///./node_modules/core-js/modules/es.string.ends-with.js","webpack:///./src/views/configuration/custom/components/ModulesConfig/index.vue?96e3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","model","value","callback","$$v","consensus","expression","ref","formRules","form","on","handleChangeCheckCustom","checkCustomTransaction","minRows","maxRows","$set","trim","handleCancel","loading","configLoading","handleSubmit","staticRenderFns","name","data","transaction","customTransaction","transactionList","computed","Error","created","initPluginInfo","methods","Promise","err","val","setTimeout","$refs","clearValidate","validate","valid","configStatus","type","title","message","path","$emit","component","$","getOwnPropertyDescriptor","f","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","nativeEndsWith","endsWith","min","Math","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","target","proto","forced","searchString","that","endPosition","arguments","length","undefined","len","end","search","call","slice"],"mappings":"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","file":"static/js/chunk-0d1e8768.990b0c49.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-view import-plugin\"},[_c('div',{staticClass:\"box-card\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(_vm._s(_vm.$t('configuration.consensusModule')))]),_c('div',{staticClass:\"consensus-list\"},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.consensus),callback:function ($$v) {_vm.consensus=$$v},expression:\"consensus\"}},[_c('el-option',{attrs:{\"label\":\"DPoS\",\"value\":\"dpos\"}}),_c('el-option',{attrs:{\"label\":(\"\" + (_vm.$t('configuration.otherConsensus'))),\"value\":\"pbft\",\"disabled\":\"\"}})],1)],1)]),_c('div',{staticClass:\"box-card\"},[_c('el-form',{ref:\"form-box\",attrs:{\"rules\":_vm.formRules,\"model\":_vm.form,\"label-position\":\"top\"}},[_c('div',{staticClass:\"more-setting\"},[_c('el-checkbox',{on:{\"change\":_vm.handleChangeCheckCustom},model:{value:(_vm.checkCustomTransaction),callback:function ($$v) {_vm.checkCustomTransaction=$$v},expression:\"checkCustomTransaction\"}},[_vm._v(_vm._s(_vm.$t('configuration.customTransactionModule')))])],1),_c('el-form-item',{ref:\"custom-transaction\",staticClass:\"custom-transaction\",attrs:{\"prop\":\"customTransaction\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4, maxRows: 6 },\"maxlength\":300,\"disabled\":!_vm.checkCustomTransaction,\"placeholder\":_vm.$t(_vm.checkCustomTransaction ? 'configuration.valid.inputCustomTransaction': 'configuration.valid.checkCustomTransaction')},model:{value:(_vm.form.customTransaction),callback:function ($$v) {_vm.$set(_vm.form, \"customTransaction\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.customTransaction\"}})],1)],1)],1),_c('div',{staticClass:\"box-footer align-right\"},[_c('el-button',{staticClass:\"im-button large\",on:{\"click\":_vm.handleCancel}},[_vm._v(_vm._s(_vm.$t('base.prevStep')))]),_c('el-button',{staticClass:\"im-button large\",attrs:{\"loading\":_vm.loading,\"disabled\":_vm.configLoading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(_vm.$t('base.complete')))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"box-view import-plugin\">\n\n    <div class=\"box-card\">\n      <div class=\"card-header\">{{ $t('configuration.consensusModule') }}</div>\n      <div class=\"consensus-list\">\n        <el-select v-model=\"consensus\" placeholder=\"请选择\">\n          <el-option label=\"DPoS\" value=\"dpos\"></el-option>\n          <el-option :label=\"`${$t('configuration.otherConsensus')}`\" value=\"pbft\" disabled></el-option>\n        </el-select>\n      </div>\n    </div>\n\n    <div class=\"box-card\">\n      <!--<div class=\"card-header\">{{ $t('configuration.transactionModule') }}</div>-->\n      <el-form ref=\"form-box\" :rules=\"formRules\" :model=\"form\" label-position=\"top\">\n\n        <!--<el-form-item class=\"transaction-list\" prop=\"transaction\">-->\n        <!--  <el-checkbox-group v-model=\"form.transaction\">-->\n        <!--    <el-checkbox :label=\"item.value\" :key=\"ind\" v-for=\"(item, ind) in transactionList\">{{ item.label }}</el-checkbox>-->\n        <!--  </el-checkbox-group>-->\n        <!--</el-form-item>-->\n\n        <div class=\"more-setting\">\n          <el-checkbox v-model=\"checkCustomTransaction\" @change=\"handleChangeCheckCustom\">{{ $t('configuration.customTransactionModule') }}</el-checkbox>\n        </div>\n        <el-form-item\n          ref=\"custom-transaction\"\n          class=\"custom-transaction\"\n          prop=\"customTransaction\">\n          <el-input\n            v-model.trim=\"form.customTransaction\"\n            type=\"textarea\"\n            :autosize=\"{ minRows: 4, maxRows: 6 }\"\n            :maxlength=\"300\"\n            :disabled=\"!checkCustomTransaction\"\n            :placeholder=\"$t(checkCustomTransaction ? 'configuration.valid.inputCustomTransaction': 'configuration.valid.checkCustomTransaction')\">\n          </el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <div class=\"box-footer align-right\">\n      <el-button class=\"im-button large\" @click=\"handleCancel\">{{ $t('base.prevStep') }}</el-button>\n      <el-button class=\"im-button large\" :loading=\"loading\" :disabled=\"configLoading\" type=\"primary\" @click=\"handleSubmit\">{{ $t('base.complete') }}</el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapMutations } from \"vuex\";\n\nexport default {\n  name: 'import-plugin',\n  data() {\n    return {\n      form: {\n        transaction: [],\n        customTransaction: '',\n      },\n      consensus: [],\n      checkCustomTransaction: false,\n      transactionList: require('./transactionModuleList.json') || [],\n      loading: false,\n      configLoading: false,\n    }\n  },\n  computed: {\n    formRules() {\n      const pathEndJAR = (rule, value, callback) => {\n        if (this.checkCustomTransaction && !this.form.customTransaction.endsWith('.jar')) {\n          callback(new Error(this.$t('configuration.valid.pathEndJAR')))\n        } else {\n          callback()\n        }\n      }\n      return {\n        customTransaction: [\n          { required: this.checkCustomTransaction, message: this.$t('base.pleaseInput'), trigger: 'blur', },\n          { validator: pathEndJAR, trigger: 'blur', },\n        ]\n      }\n    },\n  },\n  created() {\n    this.initPluginInfo()\n  },\n\n  methods: {\n    ...mapMutations('app', {\n      updateMenuList: 'updateMenuList',\n    }),\n\n    // get plugin info\n    initPluginInfo () {\n      return new Promise(resolve => {\n        this.configLoading = true\n        this.$_api.configuration.getPluginConfig({}, (err, res = {}) => {\n          this.configLoading = false\n          if (err) return\n\n          this.consensus = res.consensus\n          this.form.customTransaction = res.customTransaction || ''\n          this.checkCustomTransaction = !!this.form.customTransaction\n          this.form.transaction = res.transaction || []\n        })\n      })\n    },\n\n    handleChangeCheckCustom (val) {\n      if (val) {\n        setTimeout(this.$refs['custom-transaction'].clearValidate, 0)\n      }\n    },\n\n    handleSubmit() {\n      this.$refs['form-box'].validate(valid => {\n        if (valid) {\n          let params = {\n            // transaction: this.form.transaction,\n            customTransaction: this.checkCustomTransaction ? this.form.customTransaction : '',\n            configStatus: 0,\n          }\n\n          this.loading = true\n          this.$_api.configuration.setTransactionModule(params, (err, res) => {\n            this.loading = false\n            if (err) return\n\n            this.$notify({\n              type: 'success',\n              title: this.$t('base.successful'),\n              message: this.$t('base.success.operate')\n            })\n\n            this.$router.push({\n              path: '/nodes-manage'\n            })\n          })\n        }\n      })\n    },\n    handleCancel() {\n      this.$emit('prev-step')\n    },\n  },\n}\n</script>\n<style lang=\"scss\" scoped>\n.import-plugin {\n  .box-card {\n    margin-bottom: 40px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n    .card-header {\n      margin-bottom: 20px;\n      font-size: 16px;\n      color: font-color();\n    }\n  }\n\n  .transaction-list {\n    display: block;\n    width: 100%;\n    margin-bottom: 0;\n\n    .el-checkbox {\n      display: inline-flex;\n      align-items: center;\n      min-width: 200px;\n      margin-right: 100px;\n      margin-bottom: 14px;\n    }\n  }\n\n\n  /deep/ .el-form-item {\n    .el-form-item__label {\n      padding: 0;\n      font-size: 16px;\n      color: font-color();\n    }\n  }\n\n  /deep/ .more-setting {\n    margin: 10px 0;\n\n    .el-checkbox__label {\n      font-size: 14px;\n      color: font-color();\n    }\n  }\n\n  .custom-transaction {\n    width: 50%;\n  }\n\n}\n\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=80459864&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=80459864&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80459864\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeEndsWith = ''.endsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = String(searchString);\n    return nativeEndsWith\n      ? nativeEndsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=80459864&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=80459864&lang=scss&scoped=true&\""],"sourceRoot":""}