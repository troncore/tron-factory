(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chain-add-edit"],{"4dee":function(e,t,n){"use strict";var s=n("c59c"),a=n.n(s);a.a},"61f7":function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",(function(){return l}));var r=function(){function e(){s(this,e)}return i(e,[{key:"isNumber",value:function(e){return/^\d+(\.\d+)?$/.test(e)}},{key:"isInteger",value:function(e){return/^\d+$/.test(e)}},{key:"isTwoDecimal",value:function(e){return/^([1-9]\d*|0)(\.\d{1,2})$/.test(e)}},{key:"isIP",value:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)}}]),e}(),o=new r,c=function(){function e(){s(this,e)}return i(e,[{key:"validIP",value:function(e){return function(t,n,s){var a=!1;o.isIP(n)||(a=!0),a?s(new Error(e)):s()}}},{key:"numEqual",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(s,a,i){var r=!1;o.isNumber(a)?a==e?r=!0:n||a==e||(r=!0):r=!0,r?i(new Error(t)):i()}}},{key:"numMin",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(a,i,r){var c=!1;o.isNumber(i)?s&&!o.isInteger(i)?c=!0:i<e?c=!0:n||i!=e||(c=!0):c=!0,c?r(new Error(t)):r()}}},{key:"numMax",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(a,i,r){var c=!1;o.isNumber(i)?s&&!o.isInteger(i)?c=!0:i>e?c=!0:n||i!=e||(c=!0):c=!0,c?r(new Error(t)):r()}}},{key:"numTwoDecimal",value:function(e){return function(t,n,s){var a=!1;o.isTwoDecimal(n)||(a=!0),a?s(new Error(e)):s()}}}]),e}(),l=new c},"88c1":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chain-add-edit"},[n("div",{staticClass:"page-title"},[e._v(e._s(e.$t(e.isAddPage?e.$t("getStarted.chainManage.startCreate"):"getStarted.chainManage.updateChain")))]),n("div",{staticClass:"base-info im-card padding-20"},[n("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.chainManage.baseInfo")))]),n("div",{staticClass:"card-body"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"220px","label-position":"left",size:"medium"}},[n("el-form-item",{attrs:{prop:"chainName"}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.chainManage.chainNameLabel"))+" "),n("im-tooltip",{attrs:{content:e.$t("getStarted.chainManage.chainNameTips")}})],1),n("el-input",{attrs:{tabindex:"1",clearable:"",placeholder:e.$t("base.pleaseInput")},model:{value:e.form.chainName,callback:function(t){e.$set(e.form,"chainName","string"===typeof t?t.trim():t)},expression:"form.chainName"}})],1),n("el-form-item",{attrs:{prop:"crypto",required:""}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.chainManage.encryptionLabel"))+" "),n("im-tooltip",{attrs:{content:e.$t("getStarted.chainManage.encryptionTips")}})],1),n("el-radio-group",{attrs:{disabled:!e.canChangeCrypto},model:{value:e.form.crypto,callback:function(t){e.$set(e.form,"crypto",t)},expression:"form.crypto"}},[n("el-radio",{attrs:{label:"eckey"}},[e._v("ECKey")]),n("el-radio",{attrs:{label:"sm2"}},[e._v("SM2")])],1)],1),n("el-form-item",{attrs:{prop:"p2pVersion"}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.chainManage.p2pVersionLabel"))+" "),n("im-tooltip",{attrs:{content:e.$t("getStarted.chainManage.p2pVersionTips")}})],1),n("el-input",{attrs:{tabindex:"2",clearable:"",placeholder:e.$t("base.pleaseInput")},model:{value:e.form.p2pVersion,callback:function(t){e.$set(e.form,"p2pVersion","string"===typeof t?t.trim():t)},expression:"form.p2pVersion"}})],1),n("el-form-item",{attrs:{prop:"consensus",required:""}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.chainManage.consensusModuleLabel")))]),n("el-radio-group",{model:{value:e.form.consensus,callback:function(t){e.$set(e.form,"consensus",t)},expression:"form.consensus"}},[n("el-radio",{attrs:{label:"dpos"}},[e._v("DPOS")])],1)],1)],1)],1)]),n("div",{staticClass:"genesis-info im-card padding-20"},[n("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.chainManage.genesisAccount"))+"（"+e._s(e.genesisBlockAssets.length)+"）")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"asset-list"},[e._l(e.genesisBlockAssets,(function(t,s){return n("div",{key:s,staticClass:"asset-item"},[n("el-button",{staticClass:"op-btn",on:{click:function(n){return e.openGenesisAssetDialog(!1,t,s)}}},[n("i",{staticClass:"el-icon-edit"}),e._v(" "+e._s(t.accountName))]),n("i",{staticClass:"op-icon el-icon-delete",on:{click:function(t){return e.handleDeleteAssets(s)}}})],1)})),n("div",{staticClass:"asset-item new-add",on:{click:function(t){return e.openGenesisAssetDialog()}}},[n("el-button",{staticClass:"op-btn"},[e._v(e._s(e.$t("base.add")))]),n("i",{staticClass:"op-icon el-icon-circle-plus-outline"})],1)],2),e.genesisAssetDialogVisible?n("genesis-asset-dialog",{attrs:{visible:e.genesisAssetDialogVisible,asset:e.currentGenesisAsset},on:{"update:visible":function(t){e.genesisAssetDialogVisible=t},submit:e.handleSubmitGenesisAsset}}):e._e()],1)]),n("div",{staticClass:"page-footer"},[n("el-button",{staticClass:"im-button large",attrs:{type:"primary",disabled:!e.canOperate,loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("base.complete")))]),n("el-button",{staticClass:"im-button large",on:{click:e.handleCancel}},[e._v(e._s(e.$t("base.cancel")))])],1)])},a=[],i=(n("a4d3"),n("4de4"),n("a434"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b"),n("ade3")),r=(n("96cf"),n("1da1")),o=n("8e6c"),c=n("75d9"),l=n("61f7");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"chain-add-edit",components:{GenesisAssetDialog:c["default"],ImTooltip:o["a"]},data:function(){return{form:{chainName:"",crypto:"eckey",p2pVersion:"",consensus:"dpos"},canChangeCrypto:!0,genesisBlockAssets:[],genesisAssetDialogVisible:!1,currentGenesisAsset:{},currentGenesisAssetIndex:-1,canOperate:!1,loading:!1}},computed:{formRules:function(){return{chainName:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{min:1,max:10,message:this.$t("getStarted.chainManage.chainNameCheckLength"),trigger:"blur"}],p2pVersion:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{validator:l["a"].numMin(0,this.$t("base.valid.gtZeroInt"),!1),trigger:"blur"},{validator:l["a"].numMax(2147483647,this.$t("base.valid.maxNumberValue")+": 2147483647"),trigger:"blur"},{validator:l["a"].numEqual(11111,this.$t("getStarted.chainManage.p2pVersionCheckMainNet")),trigger:"blur"},{validator:l["a"].numEqual(20180622,this.$t("getStarted.chainManage.p2pVersionCheckTestNet")),trigger:"blur"},{validator:l["a"].numEqual(1,this.$t("getStarted.chainManage.p2pVersionCheckSpecialNet")),trigger:"blur"}]}},isAddPage:function(){return"chain-edit"!==this.$route.params.status}},created:function(){this.init()},methods:{init:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isAddPage){e.next=10;break}return e.next=3,this.hasBlockChain();case 3:if(!e.sent){e.next=7;break}this.$notify({type:"warning",title:this.$t("base.warning"),message:this.$t("getStarted.chainManage.existChain")}),e.next=8;break;case 7:this.canOperate=!0;case 8:e.next=14;break;case 10:return e.next=12,this.hasBlockChain();case 12:if(!e.sent){e.next=14;break}this.checkChainPublish();case 14:this.getChainInfo();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hasBlockChain:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.abrupt("return",new Promise((function(e){t.$_api.getStarted.hasBlockChain({},(function(n,s){if(t.loading=!1,n)return e(!1);e(!0===s)}))})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkChainPublish:function(){var e=this;this.$_api.getStarted.checkChainPublish({},(function(t,n){t?e.chainStatus=-1:e.canOperate=0===n}))},getChainInfo:function(){var e=this;this.$_api.getStarted.getChainInfo({},(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(e.form.chainName=n.chainName,e.canChangeCrypto=n.canChangeCrypto,e.form.crypto=n.crypto,e.form.p2pVersion=n.p2pVersion,e.form.consensus=n.consensus,e.genesisBlockAssets=n.genesisBlockAssets||[])}))},handleSubmit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&(e.loading=!0,e.$_api.getStarted.addChainInfo(d({},e.form,{genesisBlockAssets:e.genesisBlockAssets}),(function(t){e.loading=!1,t||(e.$notify({type:"success",title:e.$t("base.successful"),message:e.$t("base.success.operate")}),e.$router.push("/get-started/dashboard"))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.$router.push("/get-started")},openGenesisAssetDialog:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.currentGenesisAsset=t,this.currentGenesisAssetIndex=e?this.genesisBlockAssets.length:n,this.genesisAssetDialogVisible=!0},handleSubmitGenesisAsset:function(e){this.genesisBlockAssets.splice(this.currentGenesisAssetIndex,1,e),this.currentGenesisAsset={},this.currentGenesisAssetIndex=-1},handleDeleteAssets:function(e){this.genesisBlockAssets.splice(e,1)}}},h=p,g=(n("4dee"),n("2877")),f=Object(g["a"])(h,s,a,!1,null,"02febc82",null);t["default"]=f.exports},a434:function(e,t,n){"use strict";var s=n("23e7"),a=n("23cb"),i=n("a691"),r=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=Math.max,p=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!u("splice")},{splice:function(e,t){var n,s,u,f,b,m,v=o(this),y=r(v.length),k=a(e,y),C=arguments.length;if(0===C?n=s=0:1===C?(n=0,s=y-k):(n=C-2,s=p(d(i(t),0),y-k)),y+n-s>h)throw TypeError(g);for(u=c(v,s),f=0;f<s;f++)b=k+f,b in v&&l(u,f,v[b]);if(u.length=s,n<s){for(f=k;f<y-s;f++)b=f+s,m=f+n,b in v?v[m]=v[b]:delete v[m];for(f=y;f>y-s+n;f--)delete v[f-1]}else if(n>s)for(f=y-s;f>k;f--)b=f+s-1,m=f+n-1,b in v?v[m]=v[b]:delete v[m];for(f=0;f<n;f++)v[f+k]=arguments[f+2];return v.length=y-s+n,u}})},c59c:function(e,t,n){}}]);
//# sourceMappingURL=chain-add-edit.62a035ad.js.map