(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chain-add-edit"],{"614a":function(e,t,n){},"61f7":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.d(t,"a",(function(){return l}));var r=function(){function e(){a(this,e)}return i(e,[{key:"isNumber",value:function(e){return/^\d+(\.\d+)?$/.test(e)}},{key:"isInteger",value:function(e){return/^\d+$/.test(e)}},{key:"isTwoDecimal",value:function(e){return/^([1-9]\d*|0)(\.\d{1,2})$/.test(e)}},{key:"isIP",value:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)}}]),e}(),o=new r,c=function(){function e(){a(this,e)}return i(e,[{key:"validIP",value:function(e){return function(t,n,a){var s=!1;o.isIP(n)||(s=!0),s?a(new Error(e)):a()}}},{key:"numEqual",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(a,s,i){var r=!1;o.isNumber(s)?s==e?r=!0:n||s==e||(r=!0):r=!0,r?i(new Error(t)):i()}}},{key:"numMin",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s,i,r){var c=!1;o.isNumber(i)?a&&!o.isInteger(i)||i<e?c=!0:n||i!=e||(c=!0):c=!0,c?r(new Error(t)):r()}}},{key:"numMax",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s,i,r){var c=!1;o.isNumber(i)?a&&!o.isInteger(i)||i>e?c=!0:n||i!=e||(c=!0):c=!0,c?r(new Error(t)):r()}}},{key:"numTwoDecimal",value:function(e){return function(t,n,a){var s=!1;o.isTwoDecimal(n)||(s=!0),s?a(new Error(e)):a()}}}]),e}(),l=new c},"813e":function(e,t,n){"use strict";var a=n("614a"),s=n.n(a);s.a},"88c1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chain-add-edit"},[n("div",{staticClass:"page-title"},[e._v(e._s(e.$t(e.isAddPage?e.$t("getStarted.chainManage.startCreate"):"getStarted.chainManage.updateChain")))]),n("div",{staticClass:"base-info im-card padding-20"},[n("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.chainManage.baseInfo")))]),n("div",{staticClass:"card-body"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"220px","label-position":"left",size:"medium"}},[n("el-form-item",{attrs:{prop:"chainName"}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.chainManage.chainNameLabel"))+" "),n("im-tooltip",{attrs:{content:e.$t("getStarted.chainManage.chainNameTips")}})],1),n("el-input",{attrs:{tabindex:"1",clearable:"",maxlength:"30",placeholder:e.$t("base.pleaseInput")},model:{value:e.form.chainName,callback:function(t){e.$set(e.form,"chainName","string"===typeof t?t.trim():t)},expression:"form.chainName"}})],1),n("el-form-item",{attrs:{prop:"crypto",required:""}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.chainManage.encryptionLabel"))+" "),n("im-tooltip",{attrs:{content:e.$t("getStarted.chainManage.encryptionTips")}})],1),n("el-radio-group",{attrs:{disabled:!e.canChangeCrypto},model:{value:e.form.crypto,callback:function(t){e.$set(e.form,"crypto",t)},expression:"form.crypto"}},[n("el-radio",{attrs:{label:"eckey"}},[e._v("ECKey")]),n("el-radio",{attrs:{label:"sm2"}},[e._v("SM2")])],1)],1),n("el-form-item",{attrs:{prop:"p2pVersion"}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("getStarted.chainManage.p2pVersionLabel"))+" "),n("im-tooltip",{attrs:{content:e.$t("getStarted.chainManage.p2pVersionTips")}})],1),n("el-input",{attrs:{tabindex:"2",clearable:"",placeholder:e.$t("base.pleaseInput")},model:{value:e.form.p2pVersion,callback:function(t){e.$set(e.form,"p2pVersion","string"===typeof t?t.trim():t)},expression:"form.p2pVersion"}})],1),n("el-form-item",{attrs:{prop:"consensus",required:""}},[n("span",{staticClass:"space-between",attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("getStarted.chainManage.consensusModuleLabel")))]),n("el-radio-group",{model:{value:e.form.consensus,callback:function(t){e.$set(e.form,"consensus",t)},expression:"form.consensus"}},[n("el-radio",{attrs:{label:"dpos"}},[e._v("DPOS")])],1)],1)],1)],1)]),n("div",{staticClass:"genesis-info im-card padding-20"},[n("div",{staticClass:"card-header"},[e._v(e._s(e.$t("getStarted.chainManage.genesisAccount"))+"（"+e._s(e.genesisBlockAssets.length)+"）")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"asset-list"},[e._l(e.genesisBlockAssets,(function(t,a){return n("div",{key:a,staticClass:"asset-item"},[n("el-button",{staticClass:"op-btn",on:{click:function(n){return e.openGenesisAssetDialog(!1,t,a)}}},[n("i",{staticClass:"el-icon-edit"}),e._v(" "+e._s(t.accountName))]),n("i",{staticClass:"op-icon el-icon-delete",on:{click:function(t){return e.handleDeleteAssets(a)}}})],1)})),n("div",{staticClass:"asset-item new-add",on:{click:function(t){return e.openGenesisAssetDialog()}}},[n("el-button",{staticClass:"op-btn"},[e._v(e._s(e.$t("base.add")))]),n("i",{staticClass:"op-icon el-icon-circle-plus-outline"})],1)],2),e.genesisAssetDialogVisible?n("genesis-asset-dialog",{attrs:{visible:e.genesisAssetDialogVisible,asset:e.currentGenesisAsset},on:{"update:visible":function(t){e.genesisAssetDialogVisible=t},submit:e.handleSubmitGenesisAsset}}):e._e()],1)]),n("div",{staticClass:"page-footer"},[n("el-button",{staticClass:"im-button large",attrs:{type:"primary",disabled:!e.canOperate,loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("base.complete")))]),n("el-button",{staticClass:"im-button large",on:{click:e.handleCancel}},[e._v(e._s(e.$t("base.cancel")))])],1)])},s=[],i=(n("a434"),n("d3b7"),n("5530")),r=(n("96cf"),n("1da1")),o=n("8e6c"),c=n("75d9"),l=n("61f7"),u={name:"chain-add-edit",components:{GenesisAssetDialog:c["default"],ImTooltip:o["a"]},data:function(){return{form:{chainName:"",crypto:"eckey",p2pVersion:"",consensus:"dpos"},canChangeCrypto:!0,genesisBlockAssets:[],genesisAssetDialogVisible:!1,currentGenesisAsset:{},currentGenesisAssetIndex:-1,canOperate:!1,loading:!1}},computed:{formRules:function(){var e=this,t=function(t,n,a){/^[a-zA-z0-9]{1,30}$/.test(n)?a():a(e.$t("getStarted.chainManage.chainNameCheckLength"))};return{chainName:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{validator:t,trigger:"blur"}],p2pVersion:[{required:!0,message:this.$t("base.pleaseInput"),trigger:"blur"},{validator:l["a"].numMin(0,this.$t("base.valid.gtZeroInt"),!1),trigger:"blur"},{validator:l["a"].numMax(2147483647,this.$t("base.valid.maxNumberValue")+": 2147483647"),trigger:"blur"},{validator:l["a"].numEqual(11111,this.$t("getStarted.chainManage.p2pVersionCheckMainNet")),trigger:"blur"},{validator:l["a"].numEqual(20180622,this.$t("getStarted.chainManage.p2pVersionCheckTestNet")),trigger:"blur"},{validator:l["a"].numEqual(1,this.$t("getStarted.chainManage.p2pVersionCheckSpecialNet")),trigger:"blur"}]}},isAddPage:function(){return"chain-edit"!==this.$route.params.status}},created:function(){this.init()},methods:{init:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isAddPage){t.next=10;break}return t.next=3,e.hasBlockChain();case 3:if(!t.sent){t.next=7;break}e.$notify({type:"warning",title:e.$t("base.warning"),message:e.$t("getStarted.chainManage.existChain")}),t.next=8;break;case 7:e.canOperate=!0;case 8:t.next=14;break;case 10:return t.next=12,e.hasBlockChain();case 12:if(!t.sent){t.next=14;break}e.checkChainPublish();case 14:e.getChainInfo();case 15:case"end":return t.stop()}}),t)})))()},hasBlockChain:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.abrupt("return",new Promise((function(t){e.$_api.getStarted.hasBlockChain({},(function(n,a){if(e.loading=!1,n)return t(!1);t(!0===a)}))})));case 2:case"end":return t.stop()}}),t)})))()},checkChainPublish:function(){var e=this;this.$_api.getStarted.checkChainPublish({},(function(t,n){t?e.chainStatus=-1:e.canOperate=0===n}))},getChainInfo:function(){var e=this;this.$_api.getStarted.getChainInfo({},(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(e.form.chainName=n.chainName,e.canChangeCrypto=n.canChangeCrypto,e.form.crypto=n.crypto,e.form.p2pVersion=n.p2pVersion,e.form.consensus=n.consensus,e.genesisBlockAssets=n.genesisBlockAssets||[])}))},handleSubmit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&(e.loading=!0,e.$_api.getStarted.addChainInfo(Object(i["a"])(Object(i["a"])({},e.form),{},{genesisBlockAssets:e.genesisBlockAssets}),(function(t){e.loading=!1,t||(e.$notify({type:"success",title:e.$t("base.successful"),message:e.$t("base.success.operate")}),e.$router.push("/get-started/dashboard"))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.$router.push("/get-started")},openGenesisAssetDialog:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.currentGenesisAsset=t,this.currentGenesisAssetIndex=e?this.genesisBlockAssets.length:n,this.genesisAssetDialogVisible=!0},handleSubmitGenesisAsset:function(e){this.genesisBlockAssets.splice(this.currentGenesisAssetIndex,1,e),this.currentGenesisAsset={},this.currentGenesisAssetIndex=-1},handleDeleteAssets:function(e){this.genesisBlockAssets.splice(e,1)}}},d=u,p=(n("813e"),n("2877")),g=Object(p["a"])(d,a,s,!1,null,"37e0d140",null);t["default"]=g.exports},a434:function(e,t,n){"use strict";var a=n("23e7"),s=n("23cb"),i=n("a691"),r=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),p=u("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!g},{splice:function(e,t){var n,a,u,d,p,g,v=o(this),C=r(v.length),k=s(e,C),$=arguments.length;if(0===$?n=a=0:1===$?(n=0,a=C-k):(n=$-2,a=f(h(i(t),0),C-k)),C+n-a>m)throw TypeError(b);for(u=c(v,a),d=0;d<a;d++)p=k+d,p in v&&l(u,d,v[p]);if(u.length=a,n<a){for(d=k;d<C-a;d++)p=d+a,g=d+n,p in v?v[g]=v[p]:delete v[g];for(d=C;d>C-a+n;d--)delete v[d-1]}else if(n>a)for(d=C-a;d>k;d--)p=d+a-1,g=d+n-1,p in v?v[g]=v[p]:delete v[g];for(d=0;d<n;d++)v[d+k]=arguments[d+2];return v.length=C-a+n,u}})}}]);
//# sourceMappingURL=chain-add-edit.4d56a756.js.map