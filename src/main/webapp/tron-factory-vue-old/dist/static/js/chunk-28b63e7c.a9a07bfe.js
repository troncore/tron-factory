(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28b63e7c"],{1:function(e,t){},2:function(e,t){},"2f21":function(e,t,n){"use strict";var o=n("79e5");e.exports=function(e,t){return!!e&&o((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"35d3":function(e,t,n){"use strict";var o=n("9e0b"),i=n.n(o);i.a},"504c":function(e,t,n){var o=n("9e1e"),i=n("0d58"),r=n("6821"),a=n("52a7").f;e.exports=function(e){return function(t){var n,l=r(t),s=i(l),c=s.length,d=0,u=[];while(c>d)n=s[d++],o&&!a.call(l,n)||u.push(e?[n,l[n]]:l[n]);return u}}},"55dd":function(e,t,n){"use strict";var o=n("5ca1"),i=n("d8e8"),r=n("4bf8"),a=n("79e5"),l=[].sort,s=[1,2,3];o(o.P+o.F*(a((function(){s.sort(void 0)}))||!a((function(){s.sort(null)}))||!n("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(r(this)):l.call(r(this),i(e))}})},"5c2a":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"viewnodeDialog"},[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.classLoading,expression:"classLoading"}],attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"680px",top:"8vh",center:""},on:{open:e.openDialogFun,close:e.closeFun,"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"nodeDialogForm",staticClass:"nodeDialogForm",attrs:{rules:e.nodeRules,model:e.nodeForm,"label-width":"150px","label-position":"left"}},[n("el-form-item",{attrs:{prop:"id"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    ID\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodeIdTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",maxlength:50,placeholder:e.$t("tronNodeIDPlaceholder"),disabled:1==e.editStatus},model:{value:e.nodeForm.id,callback:function(t){e.$set(e.nodeForm,"id","string"===typeof t?t.trim():t)},expression:"nodeForm.id"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"userName"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    "+e._s(e.$t("tronNodeName"))+"\n                    "),n("el-tooltip",{staticClass:"item",attrs:{size:"small",effect:"dark",content:e.$t("deploymentNodeUsernameTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",maxlength:50,placeholder:e.$t("tronNodeNamePlaceholder")},model:{value:e.nodeForm.userName,callback:function(t){e.$set(e.nodeForm,"userName","string"===typeof t?t.trim():t)},expression:"nodeForm.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"ip"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    IP\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodeIpTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",maxlength:50,placeholder:e.$t("tronNodeIpPlaceholder")},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip","string"===typeof t?t.trim():t)},expression:"nodeForm.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"port"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    PORT\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodePortTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",maxlength:50,placeholder:e.$t("tronNodePortPlaceholder")},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port","string"===typeof t?t.trim():t)},expression:"nodeForm.port"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"isSR"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    "+e._s(e.$t("tronNodeWhetherIsSR"))+"\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodeSrTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-select",{attrs:{size:"small",placeholder:e.$t("tronNodeSRPlaceholder")},model:{value:e.nodeForm.isSR,callback:function(t){e.$set(e.nodeForm,"isSR",t)},expression:"nodeForm.isSR"}},e._l(e.srAry,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),e.nodeForm.isSR?n("el-form-item",{attrs:{prop:"needSyncCheck"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    needSyncCheck\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodeSyncCheckTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-select",{attrs:{size:"small",placeholder:e.$t("tronNodeSyncCheckPlaceholder")},model:{value:e.nodeForm.needSyncCheck,callback:function(t){e.$set(e.nodeForm,"needSyncCheck",t)},expression:"nodeForm.needSyncCheck"}},e._l(e.syncCheckAry,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),e.nodeForm.isSR?n("el-form-item",{attrs:{prop:"url"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    URL\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodeUrlTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",maxlength:100,placeholder:e.$t("tronNodeUrlPlaceholder")},model:{value:e.nodeForm.url,callback:function(t){e.$set(e.nodeForm,"url","string"===typeof t?t.trim():t)},expression:"nodeForm.url"}})],1):e._e(),e._v(" "),e.nodeForm.isSR?n("el-form-item",{attrs:{prop:"voteCount"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    voteCount\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("tronNodeVoteNumberTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",maxlength:20,placeholder:e.$t("tronNodeVoteNumberPlaceholder")},model:{value:e.nodeForm.voteCount,callback:function(t){e.$set(e.nodeForm,"voteCount","string"===typeof t?t.trim():t)},expression:"nodeForm.voteCount"}})],1):e._e(),e._v(" "),1==e.editStatus&&e.nodeForm.isSR?n("el-form-item",{staticClass:"publickey"},[n("span",{staticStyle:{"padding-left":"12px"},attrs:{slot:"label"},slot:"label"},[e._v("\n                    publicKey\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodePublickKeyTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v("\n                "+e._s(e.nodeForm.publicKey)+"\n            ")]):e._e(),e._v(" "),e.nodeForm.isSR?n("el-form-item",{attrs:{prop:"privateKey"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    privateKey\n                    "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("deploymentNodePrivateKeyTips"),placement:"top"}},[n("i",{staticClass:"iconfont icon-iconset0143"})])],1),e._v(" "),n("el-input",{attrs:{size:"small",type:"textarea",maxlength:1e3,placeholder:e.$t("tronNodePrivateKeyPlaceholder")},model:{value:e.nodeForm.privateKey,callback:function(t){e.$set(e.nodeForm,"privateKey","string"===typeof t?t.trim():t)},expression:"nodeForm.privateKey"}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[n("el-button",{attrs:{size:"small",type:"primary",loading:e.saveLoading},on:{click:function(t){return e.saveData("nodeDialogForm")}}},[e._v(e._s(e.$t("tronNodeSave")))]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.cancelFun}},[e._v(e._s(e.$t("tronNodeCancel")))])],1)],1)],1)],1)},i=[],r=(n("8e6e"),n("456d"),n("1c4c"),n("75fc")),a=(n("5df3"),n("4f7f"),n("ac6a"),n("bd86")),l=(n("96cf"),n("3b8d")),s=n("5e45"),c=n("93b6"),d=n("61f7"),u=n("d01b"),p=n.n(u);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"operationNode",props:["nodeDialogVisible","detailInfoData","editStatus","allNodes"],computed:{nodeRules:function(){var e=this,t=function(t,n,o){Object(d["e"])(n)?o():o(new Error(e.$t("tronSettingNumberPlaceholder")))},n=function(t,n,o){Object(d["d"])(n)?o():o(new Error(e.$t("tronSettingNumberZeroPlaceholder")))},o=function(t,n,o){Object(d["b"])(n)?o():o(new Error(e.$t("tronNodeIpValidate")))},i=function(t,n,o){"127.0.0.1"==n?o(new Error(e.$t("tronNodeIpLocalValidate"))):o()},r=function(t,n,o){n>2147483647?o(new Error(e.$t("tronNumberPlaceholder"))):o()},a=function(t,n,o){n>65535?o(new Error(e.$t("tronPortNumberPlaceholder"))):o()},l=function(t,n,o){64!=n.length?o(new Error(e.$t("tronNodeCorrectPrivateKeyPlaceholder"))):o();p.a.address.fromPrivateKey(n)},s={id:[{required:!0,message:this.$t("tronNodeIDPlaceholder"),trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{required:!0,validator:r,trigger:"blur"}],userName:[{required:!0,message:this.$t("tronNodeNamePlaceholder"),trigger:"blur"}],ip:[{required:!0,message:this.$t("tronNodeIpPlaceholder"),trigger:"blur"},{required:!0,validator:o,trigger:"blur"},{required:!0,validator:i,trigger:"blur"}],port:[{required:!0,message:this.$t("tronNodePortPlaceholder"),trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{required:!0,validator:a,trigger:"blur"}],isSR:{required:!0,message:this.$t("tronNodeSRPlaceholder"),trigger:"change"},needSyncCheck:{required:!0,message:this.$t("tronNodeSyncCheckPlaceholder"),trigger:"change"},url:[{required:!0,message:this.$t("tronNodeUrlPlaceholder"),trigger:"blur"}],voteCount:[{required:!0,message:this.$t("tronNodeVoteNumberTips"),trigger:"blur"},{required:!0,validator:n,trigger:"blur"}],privateKey:[{required:!0,message:this.$t("tronNodePrivateKeyPlaceholder"),trigger:"blur"},{required:!0,validator:l,trigger:"blur"}]};return s}},data:function(){return{classLoading:!1,saveLoading:!1,dialogVisible:this.nodeDialogVisible,dialogTitle:this.$t("tronNodeAdd"),nodeForm:{id:"",userName:"",ip:"",port:"",isSR:""},srAry:[{id:0,label:this.$t("tronNodeSrIs"),value:!0},{id:1,label:this.$t("tronNodeSrNo"),value:!1}],syncCheckAry:[{id:0,label:this.$t("tronNodeSrIs"),value:!0},{id:1,label:this.$t("tronNodeSrNo"),value:!1}]}},methods:{openDialogFun:function(){this.$refs.nodeDialogForm.resetFields()},closeFun:function(){this.$refs.nodeDialogForm.resetFields(),this.dialogVisible=!1,this.$emit("addNodeSuccess",!0)},cancelFun:function(){this.$refs.nodeDialogForm.resetFields(),this.dialogVisible=!1,this.$emit("addNodeSuccess",!0)},saveData:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(n){var o,i,a,l,d,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=28;break}return t.saveLoading=!0,void 0!=t.nodeForm.url?(o=m({url:'"'.concat(t.nodeForm.url,'"')},t.nodeForm),o.url='"'.concat(o.url,'"')):o=m({},t.nodeForm),i=!1,e.next=6,Object(c["b"])({balance:o.voteCount}).then((function(e){if(e.data)return e.data})).then((function(e){if(!e.result)return t.$message.error(t.$t("tronNodevoteCountNumberMaxPlaceholder")),t.saveLoading=!1,void(i=!1);i=!0})).catch((function(e){console.log(e)}));case 6:if(!i){e.next=26;break}if("****************************************************************"==o.privateKey&&delete o.privateKey,a=!1,l=[],t.allNodes.length>0&&t.allNodes.forEach((function(e){l.push(e.ip)})),1!=t.editStatus){e.next=21;break}if(d=new Set(l),u=new Set([sessionStorage.getItem("currentnode")]),p=new Set(Object(r["a"])(d).filter((function(e){return!u.has(e)}))),Array.from(p).forEach((function(e){e==o.ip&&(a=!0,t.$message.warning(t.$t("tronNodesIpNoSame")))})),!a){e.next=19;break}return t.saveLoading=!1,e.abrupt("return");case 19:return Object(s["f"])(o).then((function(e){t.$emit("addNodeSuccess",!0),t.$refs.nodeDialogForm.resetFields(),t.$message.success(t.$t("tronNodeEditSuccess")),t.dialogVisible=!1,t.saveLoading=!1})).catch((function(e){console.log(e),t.saveLoading=!1})),e.abrupt("return");case 21:if(t.allNodes.length>0&&t.allNodes.forEach((function(e){if(e.ip==o.ip)return t.$message.warning(t.$t("tronNodesIpNoSame")),void(a=!0)})),!a){e.next=25;break}return t.saveLoading=!1,e.abrupt("return");case 25:Object(s["a"])(o).then((function(e){t.$emit("addNodeSuccess",!0),t.$refs.nodeDialogForm.resetFields(),t.$message.success(t.$t("tronNodeAddSuccess")),t.dialogVisible=!1,t.saveLoading=!1})).catch((function(e){console.log(e),t.saveLoading=!1}));case 26:e.next=30;break;case 28:return console.log("error submit!!"),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},watch:{editStatus:function(e){this.dialogTitle=1==e?this.$t("tronNodeEditTitle"):this.$t("tronNodeAdd")},detailInfoData:function(e){this.nodeForm=this.detailInfoData},nodeDialogVisible:function(e){this.dialogVisible=e},dialogVisible:function(e){this.$emit("dialog",e)}}},h=g,b=(n("35d3"),n("2877")),v=Object(b["a"])(h,o,i,!1,null,"d449eb28",null);t["a"]=v.exports},"5ce7":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"tron-content"},[n("div",{staticClass:"tron-filter-section"},[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){return e.addNodeFun()}}},[e._v(e._s(e.$t("tronNodeAdd")))]),e._v(" "),1==e.isDeploy?n("el-button",{staticStyle:{float:"right"},attrs:{size:"small",loading:e.allNodeDeployLoading,type:e.checkType},on:{click:e.bulkDeploymentFun}},[e._v(e._s(e.$t("tronNodeBulkDeployment")))]):e._e()],1),e._v(" "),n("div",{staticClass:"filter-container tron-table",attrs:{id:"tronTable"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"empty-text":e.$t("tronNodesNoData"),data:e.list,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[1==e.isDeploy?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:e.$t("tronNodeName"),align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"IP/HOST",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"port",label:"SSH PORT",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("tronNodeWhetherIsSR"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isSR?n("el-tag",{attrs:{type:"success"}},[e._v("yes")]):n("el-tag",{attrs:{type:"danger"}},[e._v("no")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("tronNodeOperate"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.operateNodeFun(t.row)}}},[e._v(e._s(e.$t("tronNodeModify")))]),e._v(" "),n("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.deleteNodeListFun(t.row.id)}}},[e._v(e._s(e.$t("tronNodeDelete")))])]}}])})],1)],1),e._v(" "),1!=e.isDeploy?n("div",{staticClass:"mgt20"},[n("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:e.allStepsBtnType,disabled:e.allStepsBtnDisable},on:{click:e.nextStepFun}},[e._v(e._s(e.$t("tronNodeNextStep")))])],1):e._e()]),e._v(" "),n("el-dialog",{attrs:{title:e.$t("tronNodeBulkDeployment"),visible:e.deploymentDialogVisible,width:"600px",center:""},on:{"update:visible":function(t){e.deploymentDialogVisible=t}}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.currentPath,callback:function(t){e.currentPath=t},expression:"currentPath"}}),e._v(" "),n("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("deploymentUpload")))]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.deploymentDialogVisible=!1}}},[e._v("\n                "+e._s(e.$t("tronNodeCancel"))+"\n            ")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.deplogUploadLoading},on:{click:e.deployMentFun}},[e._v(e._s(e.$t("tronNodeSave")))])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:e.$t("tronNodeStatus"),visible:e.currentLogDialog,width:"600px",center:""},on:{"update:visible":function(t){e.currentLogDialog=t},close:e.currentNodeLogEnd}},[e.currentlogInfoData.length>0?n("el-timeline",e._l(e.currentlogInfoData,(function(t,o){return n("el-timeline-item",{key:o,attrs:{type:"primary"}},[e._v(e._s(t))])})),1):e._e(),e._v(" "),e.deploymentLoadingTips?n("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"text",loading:e.deplogUploadLoading}},[e._v(e._s(e.deploymentLoadingText))]):e._e()],1),e._v(" "),n("operate-node",{attrs:{allNodes:e.list,nodeDialogVisible:e.nodeObj.visible,editStatus:e.nodeObj.status,detailInfoData:e.nodeObj.detail},on:{dialog:e.nodeDetailFun,addNodeSuccess:e.addNodeSuccessFun}})],1)},i=[],r=(n("8e6e"),n("456d"),n("55dd"),n("8615"),n("96cf"),n("3b8d")),a=(n("ac6a"),n("bd86")),l=n("5e45"),s=n("5c2a");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=null,p={name:"nodelist",components:{operateNode:s["a"]},data:function(){return{list:[],isDeploy:this.$route.query.deploy,currentlogInfoData:[],deplogUploadLoading:!1,allNodeDeployLoading:!1,deploymentDialogVisible:!1,currentLogDialog:!1,deploymentLoadingTips:!0,deploymentLoadingText:this.$t("deploymentSearchLoading"),listLoading:!1,currentPath:"",checkType:"info",allStepsBtnType:"info",allStepsBtnDisable:!0,listQuery:{limit:20,page:1,total:0},nodeObj:{visible:!1,detail:{},status:0},logInfoData:[],multipleSelection:[],deployedAry:[]}},computed:{multipleSelectionIds:function(){var e=this,t=[];return this.multipleSelection.map((function(n){t.push({id:n.id,path:e.currentPath,isSR:n.isSR})})),t}},created:function(){this.getDataListFun(),this.timer=null},beforeDestroy:function(){window.clearInterval(this.timer),window.clearInterval(u),this.timer=null,u=null},methods:{sortIdFun:function(e,t){return e.id-t.id},addNodeFun:function(){this.list.length>20?this.$message({type:"info",message:this.$t("tronNodesMaxTips")}):(this.nodeObj.detail={url:"http://"},this.nodeObj.status=0,this.nodeObj.visible=!0)},operateNodeFun:function(e){this.nodeObj.detail=d({},e,{url:JSON.stringify(e.url).slice(3).slice(0,-3),privateKey:"****************************************************************"}),sessionStorage.setItem("currentnode",e.ip),this.nodeObj.status=1,this.nodeObj.visible=!0},viewCurrentLogFun:function(e){var t=this;console.log(this.timer),clearInterval(this.timer),this.logInfoData=[],this.currentLogDialog=!0,this.viewLogFun(e),this.timer=setInterval((function(){t.viewLogFun(e)}),5e3)},currentNodeLogEnd:function(){clearInterval(this.timer),this.timer=null},viewLogFun:function(e,t){var n=this;this.deploymentLoadingText=this.$t("deploymentSearchLoading"),Object(l["d"])({id:e}).then((function(e){return e.data})).then((function(e){n.currentlogInfoData=e.logInfo,n.deplogUploadLoading=!0,n.deploymentLoadingTips=!0,n.currentlogInfoData.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.indexOf("deploy finish")>-1?(n.deplogUploadLoading=!1,n.deploymentDialogVisible=!1,n.deploymentLoadingText=n.$t("deploymentDone")):"ssh connect failed"==t&&(n.deplogUploadLoading=!1,n.deploymentDialogVisible=!1,n.deploymentLoadingText=n.$t("deploymentFail"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){}))},deployMentFun:function(){var e=this;if(this.deplogUploadLoading=!0,this.allNodeDeployLoading=!0,""!=this.currentPath){this.multipleSelectionIds.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.deployNodeApiFun(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$message({type:"success",message:this.$t("deploymentLoading")});var t=[];this.multipleSelectionIds.forEach((function(e){t.push(e.id)})),this.getDataListFun(1,t)}else this.deplogUploadLoading=!1,this.$message({type:"warning",message:this.$t("deploymentPath")})},deployNodeApiFun:function(e){var t=this;Object(l["e"])(e).then((function(e){t.deplogUploadLoading=!1,t.deploymentDialogVisible=!1})).catch((function(e){t.deplogUploadLoading=!1,t.$message({type:"info",message:t.$t("deploymentFail")})}))},bulkDeploymentFun:function(){this.multipleSelectionIds.length>0?(this.logInfoData=[],this.deploymentDialogVisible=!0):this.$message({type:"warning",message:this.$t("deploymentSelectTips")})},getSelectedDeploymentFun:function(e){var t=this;this.deploymentNode=setInterval((function(){Object(l["h"])(e).then((function(e){return e.data})).then((function(e){var n=Object.values(e),o=0;n.forEach((function(e){"deploy finish"!=e&&o++})),0==o&&(t.allNodeDeployLoading=!1,clearInterval(t.deploymentNode))})).catch((function(e){console.log(e)}))}),1e4)},getDataListFun:function(e,t){var n=this;Object(l["b"])().then((function(e){return e.data})).then(function(){var o=Object(r["a"])(regeneratorRuntime.mark((function o(i){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i.length>0?(n.allStepsBtnType="primary",n.allStepsBtnDisable=!1):(n.allStepsBtnType="info",n.allStepsBtnDisable=!0),r=i,0!=r.length){o.next=5;break}return o.next=5,n.$store.dispatch("user/changeRoles","node").then((function(e){console.log(e)}));case 5:1==e&&(r.forEach((function(e){n.multipleSelectionIds.forEach((function(t){t.id==e.id&&(e.logLoading=!0)}))})),n.getSelectedDeploymentFun(t)),n.list=r.sort(n.sortIdFun);case 7:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},handleSelectionChange:function(e){this.multipleSelection=e,e.length>0?this.checkType="success":this.checkType="info"},handleSizeChange:function(e){this.listQuery.limit=e,this.getDataListFun()},handleCurrentChange:function(e){this.listQuery.page=e,this.getDataListFun()},deleteNodeListFun:function(e){var t=this;this.$confirm(this.$t("tronNodesDeleteTips"),this.$t("tronNodesDeleteTipsTitle"),{confirmButtonText:this.$t("tronNodeDetermine"),cancelButtonText:this.$t("tronNodeCancel"),type:"warning"}).then((function(){Object(l["c"])({id:e}).then((function(e){t.$message.success(t.$t("tronNodesDeleteSuccess")),t.getDataListFun()})).catch((function(e){}))})).catch((function(){t.$message({type:"info",message:t.$t("tronNodesCancelDelete")})}))},nodeDetailFun:function(e){this.nodeObj.visible=e},addNodeSuccessFun:function(e){e&&this.getDataListFun()},nextStepFun:function(){var e=this;Object(l["g"])().then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(n),204!==n.code){t.next=5;break}return t.next=4,e.$store.dispatch("user/changeRoles","setting").then((function(e){console.log(e)}));case 4:e.$router.push({path:"/setting/list"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}}},f=p,m=n("2877"),g=Object(m["a"])(f,o,i,!1,null,"56846b3c",null);t["default"]=g.exports},"5e45":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return u}));var o=n("b775");function i(e){return Object(o["a"])({url:"/nodeInfo",method:"post",params:e})}function r(e){return Object(o["a"])({url:"/nodeInfo",method:"delete",params:e})}function a(e){return Object(o["a"])({url:"/nodeInfo",method:"PUT",params:e})}function l(e){return Object(o["a"])({url:"/checkNode",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/allNodeInfo",method:"get",params:e})}function c(e){return Object(o["a"])({url:"/deployNode",method:"post",params:e})}function d(e){return Object(o["a"])({url:"/getLogInfo",method:"get",params:e})}function u(){return Object(o["a"])({url:"/initConfig",method:"POST"})}},8615:function(e,t,n){var o=n("5ca1"),i=n("504c")(!1);o(o.S,"Object",{values:function(e){return i(e)}})},"9e0b":function(e,t,n){}}]);